  [1m[36mActiveRecord::InternalMetadata Load (27.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (7.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2025-09-26 21:51:49 +0200
  
ActionController::RoutingError (No route matches [GET] "/users"):
  
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/users" for 127.0.0.1 at 2025-09-26 21:51:53 +0200
  
ActionController::RoutingError (No route matches [POST] "/users"):
  
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users/0" for 127.0.0.1 at 2025-09-26 21:51:54 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/0"):
  
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (10.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (7.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2025-09-26 21:55:29 +0200
  
ActionController::RoutingError (No route matches [GET] "/users"):
  
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (26.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "Jane"], ["LIMIT", 1]]
  [1m[36mUser Create (41.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password_digest") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "Jane"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/7" for 127.0.0.1 at 2025-09-26 21:55:31 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/7"):
  
  [1m[36mTRANSACTION (7.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/users/0" for 127.0.0.1 at 2025-09-26 21:55:31 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/0"):
  
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (7.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (6.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2025-09-26 21:59:56 +0200
Processing by UsersController#index as JSON
  [1m[36mUser Load (9.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 812ms (Views: 12.9ms | ActiveRecord: 53.6ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "Jane"], ["LIMIT", 1]]
  [1m[36mUser Create (9.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password_digest") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "Jane"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/8" for 127.0.0.1 at 2025-09-26 21:59:57 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "8"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/users/0" for 127.0.0.1 at 2025-09-26 21:59:57 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "0"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2025-09-26 22:01:47 +0200
Processing by UsersController#index as JSON
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 177ms (Views: 39.2ms | ActiveRecord: 18.6ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "Jane"], ["LIMIT", 1]]
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password_digest") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "Jane"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/9" for 127.0.0.1 at 2025-09-26 22:01:48 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "9"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 5.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/users/0" for 127.0.0.1 at 2025-09-26 22:01:48 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "0"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 1.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2025-09-26 22:02:48 +0200
Processing by UsersController#index as JSON
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 139ms (Views: 40.0ms | ActiveRecord: 20.0ms (1 query, 0 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/users" for 127.0.0.1 at 2025-09-26 22:02:48 +0200
Processing by UsersController#create as HTML
  Parameters: {"username" => "John Doe", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "John Doe", "email" => "[FILTERED]"}}
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (8.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "John Doe"], ["LIMIT", 1]]
  [1m[36mUser Create (5.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password_digest") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "John Doe"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 38ms (Views: 1.1ms | ActiveRecord: 18.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "Jane"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password_digest") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "Jane"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/11" for 127.0.0.1 at 2025-09-26 22:02:48 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "11"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.7ms | ActiveRecord: 6.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/users/0" for 127.0.0.1 at 2025-09-26 22:02:48 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "0"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 1.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (7.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (11.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2025-09-26 22:06:28 +0200
Processing by UsersController#index as JSON
  [1m[36mUser Load (8.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 275ms (Views: 12.9ms | ActiveRecord: 48.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/users" for 127.0.0.1 at 2025-09-26 22:06:29 +0200
Processing by UsersController#create as HTML
  Parameters: {"username" => "John Doe", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "John Doe", "email" => "[FILTERED]"}}
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "John Doe"], ["LIMIT", 1]]
  [1m[36mUser Create (9.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password_digest") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "John Doe"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 49ms (Views: 0.2ms | ActiveRecord: 17.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "Jane"], ["LIMIT", 1]]
  [1m[36mUser Create (6.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password_digest") VALUES ($1, $2, $3) RETURNING "id"[0m  [["username", "Jane"], ["email", "[FILTERED]"], ["password_digest", "[FILTERED]"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/13" for 127.0.0.1 at 2025-09-26 22:06:29 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "13"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 6.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/users/0" for 127.0.0.1 at 2025-09-26 22:06:29 +0200
Processing by UsersController#show as JSON
  Parameters: {"id" => "0"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 7ms (Views: 2.7ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (19.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (7.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:14:33 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "testuser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/register
Completed 302 Found in 94ms (ActiveRecord: 17.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather/index" for 127.0.0.1 at 2025-11-23 14:14:34 +0100
  
ActionController::RoutingError (No route matches [GET] "/weather/index"):
  
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:17:59 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "testuser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 54ms (Views: 0.7ms | ActiveRecord: 12.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather/index" for 127.0.0.1 at 2025-11-23 14:17:59 +0100
  
ActionController::RoutingError (No route matches [GET] "/weather/index"):
  
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:19:27 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_46b20e66", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_46b20e66", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_46b20e66"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_46b20e66"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 40ms (Views: 0.2ms | ActiveRecord: 13.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_03a0ee02"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_03a0ee02"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 14:19:27 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_03a0ee02", "password" => "[FILTERED]", "user" => {"username" => "testuser_03a0ee02", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_03a0ee02"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f607c58f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_f607c58f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 14:19:27 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_f607c58f", "password" => "[FILTERED]", "user" => {"username" => "testuser_f607c58f", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f607c58f"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather/index" for 127.0.0.1 at 2025-11-23 14:19:27 +0100
  
ActionController::RoutingError (No route matches [GET] "/weather/index"):
  
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:20:47 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_b1a73d13", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_b1a73d13", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b1a73d13"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_b1a73d13"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 43ms (Views: 0.2ms | ActiveRecord: 11.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0962953d"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_0962953d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 14:20:47 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_0962953d", "password" => "[FILTERED]", "user" => {"username" => "testuser_0962953d", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0962953d"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_40bc62d8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_40bc62d8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 14:20:47 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_40bc62d8", "password" => "[FILTERED]", "user" => {"username" => "testuser_40bc62d8", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_40bc62d8"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 14:20:47 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.0ms)
Completed 200 OK in 162ms (Views: 22.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (15.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:36:29 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_a0dbb8d7", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_a0dbb8d7", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a0dbb8d7"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_a0dbb8d7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 54ms (Views: 0.3ms | ActiveRecord: 16.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_00ec675b"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_00ec675b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 14:36:29 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_00ec675b", "password" => "[FILTERED]", "user" => {"username" => "testuser_00ec675b", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_00ec675b"], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 5.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4b46cda8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_4b46cda8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 14:36:29 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_4b46cda8", "password" => "[FILTERED]", "user" => {"username" => "testuser_4b46cda8", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4b46cda8"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 14:36:29 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | GC: 0.0ms)
Completed 200 OK in 152ms (Views: 20.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 14:42:31 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 41.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 14:42:31 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 14:42:32 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 14:42:32 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 14:44:20 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | GC: 0.0ms)
Completed 200 OK in 56ms (Views: 34.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 14:44:20 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 14:44:20 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 14:44:20 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:44:21 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 39ms (Views: 0.3ms | ActiveRecord: 10.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 14:44:21 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 14:46:07 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | GC: 0.0ms)
Completed 200 OK in 72ms (Views: 44.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 14:46:08 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 14:46:08 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 14:46:08 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/register" for 127.0.0.1 at 2025-11-23 14:46:09 +0100
  
ActionController::RoutingError (No route matches [POST] "/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 14:46:09 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 14:48:39 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Completed 500 Internal Server Error in 48ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 14:48:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 14:55:39 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 21.0ms | GC: 0.2ms)
Completed 200 OK in 74ms (Views: 45.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 14:55:39 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 14:55:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 14:55:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:55:41 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 53ms (Views: 0.4ms | ActiveRecord: 15.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 14:55:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/login" for 127.0.0.1 at 2025-11-23 14:55:41 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 14:55:41 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 14:55:42 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 4.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 14:57:44 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | GC: 0.0ms)
Completed 200 OK in 63ms (Views: 40.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 14:57:44 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 14:57:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 14:57:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 14:57:45 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 40ms (Views: 0.3ms | ActiveRecord: 11.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 14:57:45 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:00:43 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 31.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:00:43 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:00:43 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:00:43 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:00:44 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
Completed 400 Bad Request in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  
ActionController::ParameterMissing (param is missing or the value is empty or invalid: user):
  
app/controllers/api/users_controller.rb:30:in 'Api::UsersController#user_params'
app/controllers/api/users_controller.rb:19:in 'Api::UsersController#register'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 15:00:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:02:06 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.7ms | GC: 0.0ms)
Completed 200 OK in 79ms (Views: 48.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:02:06 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:02:06 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:02:06 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/register" for 127.0.0.1 at 2025-11-23 15:02:07 +0100
  
ActionController::RoutingError (No route matches [POST] "/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 15:02:07 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:04:51 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_d803f681", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_d803f681", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d803f681"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_d803f681"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/login
Completed 302 Found in 45ms (ActiveRecord: 14.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7f899de3"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_7f899de3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:04:51 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_7f899de3", "password" => "[FILTERED]", "user" => {"username" => "testuser_7f899de3", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7f899de3"], ["LIMIT", 1]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f6321c2"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_9f6321c2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:04:51 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_9f6321c2", "password" => "[FILTERED]", "user" => {"username" => "testuser_9f6321c2", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f6321c2"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 4ms (ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 15:04:51 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | GC: 0.0ms)
Completed 200 OK in 147ms (Views: 22.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:05:25 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_87e0ef6b", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_87e0ef6b", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_87e0ef6b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_87e0ef6b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/login
Completed 302 Found in 53ms (ActiveRecord: 12.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ab8d3a4e"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_ab8d3a4e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:05:25 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_ab8d3a4e", "password" => "[FILTERED]", "user" => {"username" => "testuser_ab8d3a4e", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ab8d3a4e"], ["LIMIT", 1]]
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e3096014"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_e3096014"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:05:25 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_e3096014", "password" => "[FILTERED]", "user" => {"username" => "testuser_e3096014", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e3096014"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 2ms (ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 15:05:25 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | GC: 0.0ms)
Completed 200 OK in 135ms (Views: 21.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:05:57 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_433893f0", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_433893f0", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_433893f0"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_433893f0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 46ms (Views: 0.3ms | ActiveRecord: 14.2ms (2 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4942eaa4"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_4942eaa4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:05:57 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_4942eaa4", "password" => "[FILTERED]", "user" => {"username" => "testuser_4942eaa4", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4942eaa4"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0a4dd4c6"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_0a4dd4c6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:05:58 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_0a4dd4c6", "password" => "[FILTERED]", "user" => {"username" => "testuser_0a4dd4c6", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0a4dd4c6"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 15:05:58 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | GC: 0.0ms)
Completed 200 OK in 134ms (Views: 20.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:06:14 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_402ebf7a", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_402ebf7a", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_402ebf7a"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_402ebf7a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 42ms (Views: 0.2ms | ActiveRecord: 14.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5aa1dd65"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_5aa1dd65"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:06:14 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_5aa1dd65", "password" => "[FILTERED]", "user" => {"username" => "testuser_5aa1dd65", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5aa1dd65"], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_105a234c"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_105a234c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:06:14 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_105a234c", "password" => "[FILTERED]", "user" => {"username" => "testuser_105a234c", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_105a234c"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 15:06:14 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | GC: 0.0ms)
Completed 200 OK in 169ms (Views: 33.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:08:37 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 0.0ms)
Completed 200 OK in 56ms (Views: 34.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:08:37 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:08:37 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:08:37 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:08:38 +0100
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 15:08:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:09:30 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.2ms)
Completed 200 OK in 65ms (Views: 39.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:09:30 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:09:30 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:09:30 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:09:31 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 39ms (ActiveRecord: 9.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 15:09:31 +0100
Processing by SessionsController#login as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 11ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 15:09:31 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:09:31 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:11:22 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
Completed 200 OK in 64ms (Views: 38.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:11:22 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:11:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:11:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:11:23 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 40ms (ActiveRecord: 11.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 15:11:23 +0100
Processing by SessionsController#login as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 15:11:23 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:11:23 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:13:42 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | GC: 0.0ms)
Completed 200 OK in 71ms (Views: 44.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:13:42 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:13:42 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:13:42 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:13:43 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 53ms (ActiveRecord: 14.2ms (2 queries, 0 cached) | GC: 0.2ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 15:13:43 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 5.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:13:43 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:17:21 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 28.5ms | GC: 0.0ms)
Completed 200 OK in 79ms (Views: 51.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:17:22 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:17:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:17:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:17:22 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
[31mUnpermitted parameter: :commit. Context: { controller: Api::UsersController, action: register, request: #<ActionDispatch::Request:0x0000022e867ce398>, params: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register", "controller" => "api/users", "action" => "register"} }[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 43ms (Views: 0.2ms | ActiveRecord: 11.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 15:17:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:18:50 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 11.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 42.2ms | GC: 0.0ms)
Completed 200 OK in 142ms (Views: 97.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 15:18:50 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 15:18:50 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 15:18:50 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/register" for 127.0.0.1 at 2025-11-23 15:18:51 +0100
  
ActionController::RoutingError (No route matches [POST] "/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 15:18:52 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:20:45 +0100
  
AbstractController::ActionNotFound (The action 'new' could not be found for UsersController):
  
actionpack (8.0.2.1) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in 'ActionView::Rendering#process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 15:20:45 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 15:22:01 +0100
  
AbstractController::ActionNotFound (The action 'new' could not be found for UsersController):
  
actionpack (8.0.2.1) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in 'ActionView::Rendering#process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 15:22:02 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:28:55 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_191aac62", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_191aac62", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_191aac62"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_191aac62"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/login
Completed 302 Found in 50ms (ActiveRecord: 13.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_56186533"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_56186533"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:28:55 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_56186533", "password" => "[FILTERED]", "user" => {"username" => "testuser_56186533", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_56186533"], ["LIMIT", 1]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 2.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fe11f219"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_fe11f219"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:28:55 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_fe11f219", "password" => "[FILTERED]", "user" => {"username" => "testuser_fe11f219", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fe11f219"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 3ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 15:28:55 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.0ms)
Completed 200 OK in 169ms (Views: 23.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:45:27 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_0f2828be", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_0f2828be", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0f2828be"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_0f2828be"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 85ms (ActiveRecord: 16.2ms (2 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a55b27d7"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_a55b27d7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:45:27 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_a55b27d7", "password" => "[FILTERED]", "user" => {"username" => "testuser_a55b27d7", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a55b27d7"], ["LIMIT", 1]]
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 2.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8ee60298"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_8ee60298"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:45:27 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_8ee60298", "password" => "[FILTERED]", "user" => {"username" => "testuser_8ee60298", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8ee60298"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 2ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 15:45:27 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | GC: 0.0ms)
Completed 200 OK in 143ms (Views: 19.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 15:59:57 +0100
Processing by Api::UsersController#register as JSON
  Parameters: {"username" => "testuser_0a60c350", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_0a60c350", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0a60c350"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_0a60c350"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 85ms (ActiveRecord: 15.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fa09be32"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_fa09be32"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:59:57 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_fa09be32", "password" => "[FILTERED]", "user" => {"username" => "testuser_fa09be32", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fa09be32"], ["LIMIT", 1]]
Redirected to http://www.example.com/
Completed 302 Found in 6ms (ActiveRecord: 3.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e641e8a2"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_e641e8a2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 15:59:57 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_e641e8a2", "password" => "[FILTERED]", "user" => {"username" => "testuser_e641e8a2", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e641e8a2"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 3ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 15:59:57 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.4ms | GC: 0.0ms)
Completed 200 OK in 169ms (Views: 24.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test_api/register" for 127.0.0.1 at 2025-11-23 16:02:29 +0100
  
ActionController::RoutingError (uninitialized constant TestApi)
Caused by: ActionDispatch::MissingController (uninitialized constant TestApi)
Caused by: NameError (uninitialized constant TestApi)

Information for: ActionController::RoutingError (uninitialized constant TestApi):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant TestApi):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant TestApi):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9603d482"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_9603d482"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test_api/login" for 127.0.0.1 at 2025-11-23 16:02:29 +0100
  
ActionController::RoutingError (uninitialized constant TestApi)
Caused by: ActionDispatch::MissingController (uninitialized constant TestApi)
Caused by: NameError (uninitialized constant TestApi)

Information for: ActionController::RoutingError (uninitialized constant TestApi):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant TestApi):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant TestApi):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_83cd6da0"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_83cd6da0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test_api/login" for 127.0.0.1 at 2025-11-23 16:02:29 +0100
  
ActionController::RoutingError (uninitialized constant TestApi)
Caused by: ActionDispatch::MissingController (uninitialized constant TestApi)
Caused by: NameError (uninitialized constant TestApi)

Information for: ActionController::RoutingError (uninitialized constant TestApi):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant TestApi):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:36:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant TestApi):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:36:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 16:02:29 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | GC: 0.0ms)
Completed 200 OK in 159ms (Views: 19.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:06:41 +0100
  
ActionController::RoutingError (uninitialized constant Test)
Caused by: ActionDispatch::MissingController (uninitialized constant Test)
Caused by: NameError (uninitialized constant Test)

Information for: ActionController::RoutingError (uninitialized constant Test):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8b646726"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_8b646726"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:06:41 +0100
  
ActionController::RoutingError (uninitialized constant Test)
Caused by: ActionDispatch::MissingController (uninitialized constant Test)
Caused by: NameError (uninitialized constant Test)

Information for: ActionController::RoutingError (uninitialized constant Test):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_87220504"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_87220504"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test_api/login" for 127.0.0.1 at 2025-11-23 16:06:41 +0100
  
ActionController::RoutingError (No route matches [POST] "/test_api/login"):
  
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 16:06:41 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | GC: 0.0ms)
Completed 200 OK in 161ms (Views: 19.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:07:32 +0100
  
ActionController::RoutingError (uninitialized constant Test)
Caused by: ActionDispatch::MissingController (uninitialized constant Test)
Caused by: NameError (uninitialized constant Test)

Information for: ActionController::RoutingError (uninitialized constant Test):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_51626ce3"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_51626ce3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:07:32 +0100
  
ActionController::RoutingError (uninitialized constant Test)
Caused by: ActionDispatch::MissingController (uninitialized constant Test)
Caused by: NameError (uninitialized constant Test)

Information for: ActionController::RoutingError (uninitialized constant Test):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8c92461"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_d8c92461"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 16:07:32 +0100
Processing by Api::UsersController#login as JSON
  Parameters: {"username" => "testuser_d8c92461", "password" => "[FILTERED]", "user" => {"username" => "testuser_d8c92461", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8c92461"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 43ms (ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 16:07:32 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 25.8ms | GC: 0.0ms)
Completed 200 OK in 138ms (Views: 31.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:09:46 +0100
  
ActionController::RoutingError (uninitialized constant Test)
Caused by: ActionDispatch::MissingController (uninitialized constant Test)
Caused by: NameError (uninitialized constant Test)

Information for: ActionController::RoutingError (uninitialized constant Test):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:15:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9d3cc6a1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_9d3cc6a1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:09:46 +0100
  
ActionController::RoutingError (uninitialized constant Test)
Caused by: ActionDispatch::MissingController (uninitialized constant Test)
Caused by: NameError (uninitialized constant Test)

Information for: ActionController::RoutingError (uninitialized constant Test):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1b27b141"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_1b27b141"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:09:46 +0100
  
ActionController::RoutingError (uninitialized constant Test)
Caused by: ActionDispatch::MissingController (uninitialized constant Test)
Caused by: NameError (uninitialized constant Test)

Information for: ActionController::RoutingError (uninitialized constant Test):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:36:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:36:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 16:09:46 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 28.7ms | GC: 0.2ms)
Completed 200 OK in 177ms (Views: 34.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:11:11 +0100
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_de381b08"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_de381b08"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:11:11 +0100
  
ActionController::RoutingError (uninitialized constant Test::UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant Test::UsersController)
Caused by: NameError (uninitialized constant Test::UsersController)

Information for: ActionController::RoutingError (uninitialized constant Test::UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test::UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test::UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:28:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_659be1a8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_659be1a8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:11:11 +0100
  
ActionController::RoutingError (uninitialized constant Test::UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant Test::UsersController)
Caused by: NameError (uninitialized constant Test::UsersController)

Information for: ActionController::RoutingError (uninitialized constant Test::UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant Test::UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:36:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant Test::UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:25:in 'ActionDispatch::Integration::RequestHelpers#post'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#post'
spec/requests/api_users_spec.rb:36:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 16:11:11 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.2ms | GC: 0.0ms)
Completed 200 OK in 212ms (Views: 39.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:12:15 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_43ea17d6", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_43ea17d6", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_43ea17d6"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_43ea17d6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 46ms (Views: 1.0ms | ActiveRecord: 12.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c507aef7"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_c507aef7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:12:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_c507aef7", "password" => "[FILTERED]", "user" => {"username" => "testuser_c507aef7", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c507aef7"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 2.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a821ca6d"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_a821ca6d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 16:12:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_a821ca6d", "password" => "[FILTERED]", "user" => {"username" => "testuser_a821ca6d", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a821ca6d"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 16:12:15 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | GC: 0.0ms)
Completed 200 OK in 121ms (Views: 18.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 16:13:17 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | GC: 0.0ms)
Completed 200 OK in 61ms (Views: 37.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:13:17 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:13:17 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:13:17 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 16:13:18 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 4.6ms | ActiveRecord: 8.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:13:18 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/register" for 127.0.0.1 at 2025-11-23 16:14:56 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:14:56 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 16:19:32 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | GC: 0.0ms)
Completed 200 OK in 63ms (Views: 39.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:19:32 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:19:32 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:19:32 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/register" for 127.0.0.1 at 2025-11-23 16:20:57 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:20:58 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/register" for 127.0.0.1 at 2025-11-23 16:22:58 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:22:58 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/register" for 127.0.0.1 at 2025-11-23 16:24:02 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:24:02 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 16:25:11 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | GC: 0.0ms)
Completed 200 OK in 60ms (Views: 38.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:25:11 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:25:11 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:25:11 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 16:25:12 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 56ms (Views: 6.6ms | ActiveRecord: 15.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:25:12 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/test/register" for 127.0.0.1 at 2025-11-23 16:30:30 +0100
  
ActionController::RoutingError (No route matches [GET] "/test/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:30:30 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/test/register" for 127.0.0.1 at 2025-11-23 16:31:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/test/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:31:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 16:35:15 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.8ms | GC: 0.0ms)
Completed 200 OK in 61ms (Views: 37.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:35:16 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:35:16 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:35:16 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 16:35:17 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 53ms (ActiveRecord: 14.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 16:35:17 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 5.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:35:17 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 16:36:15 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
Completed 200 OK in 58ms (Views: 36.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:36:15 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:36:15 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:36:15 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 16:36:16 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 63ms (ActiveRecord: 16.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 16:36:16 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 5.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:36:16 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 16:38:10 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.9ms | GC: 0.0ms)
Completed 200 OK in 72ms (Views: 43.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:10 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:38:10 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:38:11 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 40ms (ActiveRecord: 9.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 4.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 2.5ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:12 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 16:38:44 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | GC: 0.0ms)
Completed 200 OK in 56ms (Views: 34.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 31ms (ActiveRecord: 7.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 3.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:45 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 16:38:46 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 3.8ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 16:38:46 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:38:46 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:42:56 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/test/register_form"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:42:57 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:45:55 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/test/register_form"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:45:55 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:46:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/api/test/register_form"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:46:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:51:58 +0100
Processing by Api::Test::UsersController#register_form as HTML
Completed 500 Internal Server Error in 62ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:51:58 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:53:16 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | GC: 0.0ms)
Completed 200 OK in 58ms (Views: 36.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:53:17 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:53:17 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:53:17 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/test/register" for 127.0.0.1 at 2025-11-23 16:53:18 +0100
  
ActionController::RoutingError (No route matches [POST] "/api/test/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:53:18 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:55:16 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | GC: 0.0ms)
Completed 200 OK in 53ms (Views: 31.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:55:16 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:55:16 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:55:17 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:55:18 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 38ms (Views: 0.6ms | ActiveRecord: 9.6ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:55:18 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:56:22 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 5.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | GC: 0.0ms)
Completed 200 OK in 63ms (Views: 40.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:56:23 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:56:23 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:56:23 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:56:24 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 35ms (Views: 0.6ms | ActiveRecord: 9.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:56:24 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 16:57:50 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | GC: 0.0ms)
Completed 200 OK in 51ms (Views: 32.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 16:57:50 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 16:57:50 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 16:57:50 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 16:57:51 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 33ms (Views: 1.0ms | ActiveRecord: 8.9ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 16:57:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 17:00:20 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 6.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | GC: 0.0ms)
Completed 200 OK in 69ms (Views: 44.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:00:20 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:00:20 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:00:20 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/test/register" for 127.0.0.1 at 2025-11-23 17:00:21 +0100
  
ActionController::RoutingError (No route matches [POST] "/api/test/register"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 17:00:21 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 17:01:27 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 35.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:01:27 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:01:27 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:01:28 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/test/register" for 127.0.0.1 at 2025-11-23 17:01:28 +0100
Processing by Api::Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}, "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/api/test/login_form
Completed 302 Found in 40ms (ActiveRecord: 10.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/api/test/login_form" for 127.0.0.1 at 2025-11-23 17:01:28 +0100
Processing by Api::Test::UsersController#login_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/login_form.html.erb within layouts/application
  Rendered api/test/users/login_form.html.erb within layouts/application (Duration: 8.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:01:28 +0100
Started GET "/api/test/login_form" for 127.0.0.1 at 2025-11-23 17:01:28 +0100
Processing by Api::Test::UsersController#login_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/login_form.html.erb within layouts/application
  Rendered api/test/users/login_form.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:01:28 +0100
Started POST "/api/test/login" for 127.0.0.1 at 2025-11-23 17:01:29 +0100
Processing by Api::Test::UsersController#login as HTML
  Parameters: {"user" => {"username" => "e2euser", "password" => "[FILTERED]"}, "commit" => "Log ind"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 3.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:01:29 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:01:29 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 17:03:21 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 7.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.4ms | GC: 0.0ms)
Completed 200 OK in 87ms (Views: 63.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:03:21 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:03:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:03:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/test/register" for 127.0.0.1 at 2025-11-23 17:03:22 +0100
Processing by Api::Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}, "commit" => "Register"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/api/test/register_form
Completed 302 Found in 38ms (ActiveRecord: 11.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/api/test/register_form" for 127.0.0.1 at 2025-11-23 17:03:22 +0100
Processing by Api::Test::UsersController#register_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/register_form.html.erb within layouts/application
  Rendered api/test/users/register_form.html.erb within layouts/application (Duration: 9.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:03:22 +0100
Started GET "/api/test/login_form" for 127.0.0.1 at 2025-11-23 17:03:23 +0100
Processing by Api::Test::UsersController#login_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/login_form.html.erb within layouts/application
  Rendered api/test/users/login_form.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:03:23 +0100
Started POST "/api/test/login" for 127.0.0.1 at 2025-11-23 17:03:23 +0100
Processing by Api::Test::UsersController#login as HTML
  Parameters: {"user" => {"username" => "e2euser", "password" => "[FILTERED]"}, "commit" => "Log ind"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/api/test/login_form
Completed 302 Found in 10ms (ActiveRecord: 5.6ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/api/test/login_form" for 127.0.0.1 at 2025-11-23 17:03:23 +0100
Processing by Api::Test::UsersController#login_form as HTML
  Rendering layout layouts/application.html.erb
  Rendering api/test/users/login_form.html.erb within layouts/application
  Rendered api/test/users/login_form.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:03:23 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 17:04:02 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_3f7fdbc5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_3f7fdbc5", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3f7fdbc5"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_3f7fdbc5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 61ms (Views: 0.5ms | ActiveRecord: 15.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ab535eb0"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_ab535eb0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:04:02 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_ab535eb0", "password" => "[FILTERED]", "user" => {"username" => "testuser_ab535eb0", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ab535eb0"], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 5.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_666d109e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_666d109e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:04:02 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_666d109e", "password" => "[FILTERED]", "user" => {"username" => "testuser_666d109e", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_666d109e"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 17:04:02 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.6ms | GC: 0.0ms)
Completed 200 OK in 166ms (Views: 27.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:11:03 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.7ms | GC: 0.0ms)
Completed 200 OK in 65ms (Views: 41.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:04 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:11:04 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:11:04 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:11:05 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 4.9ms | ActiveRecord: 14.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:05 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:11:05 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 3.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:05 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:11:06 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:11:06 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:06 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:11:52 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.6ms | GC: 0.0ms)
Completed 200 OK in 78ms (Views: 51.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:52 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:11:52 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:11:52 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:11:53 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 7.3ms | ActiveRecord: 18.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:53 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:11:53 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 7.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:53 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:11:54 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:11:54 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:11:54 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:13:53 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 33.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:13:53 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:13:53 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:13:54 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:13:54 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 57ms (Views: 6.2ms | ActiveRecord: 15.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:13:54 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:13:55 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 6.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:13:55 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:13:55 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 3.4ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:13:55 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:13:55 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 17:14:26 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_a416d21a", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_a416d21a", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a416d21a"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_a416d21a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 44ms (Views: 0.2ms | ActiveRecord: 12.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a671d687"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_a671d687"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:14:26 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_a671d687", "password" => "[FILTERED]", "user" => {"username" => "testuser_a671d687", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a671d687"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_27f03c1f"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_27f03c1f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:14:26 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_27f03c1f", "password" => "[FILTERED]", "user" => {"username" => "testuser_27f03c1f", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_27f03c1f"], ["LIMIT", 1]]
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 17:14:26 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | GC: 0.0ms)
Completed 200 OK in 146ms (Views: 17.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:14:51 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.9ms | GC: 0.0ms)
Completed 200 OK in 70ms (Views: 44.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:14:51 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:14:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:14:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:14:52 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 4.8ms | ActiveRecord: 13.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:14:52 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:14:52 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 3.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:14:52 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:14:53 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:14:53 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:14:53 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (63.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 17:19:51 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_e2c88ed7", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_e2c88ed7", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e2c88ed7"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_e2c88ed7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 57ms (Views: 0.3ms | ActiveRecord: 13.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1836440e"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_1836440e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:19:51 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_1836440e", "password" => "[FILTERED]", "user" => {"username" => "testuser_1836440e", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1836440e"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c124d58f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_c124d58f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:19:51 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_c124d58f", "password" => "[FILTERED]", "user" => {"username" => "testuser_c124d58f", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c124d58f"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_540a19e8"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_540a19e8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:19:51 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_540a19e8", "password" => "[FILTERED]", "user" => {"username" => "testuser_540a19e8", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_540a19e8"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:19:51 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:19:in 'ActionDispatch::Integration::RequestHelpers#get'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#get'
spec/requests/api_users_spec.rb:53:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:19:in 'ActionDispatch::Integration::RequestHelpers#get'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#get'
spec/requests/api_users_spec.rb:53:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 17:19:51 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | GC: 0.0ms)
Completed 200 OK in 378ms (Views: 30.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 17:22:31 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_a1b046a1", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_a1b046a1", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a1b046a1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_a1b046a1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 55ms (Views: 0.2ms | ActiveRecord: 17.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fea58da3"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_fea58da3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:22:31 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_fea58da3", "password" => "[FILTERED]", "user" => {"username" => "testuser_fea58da3", "password" => "[FILTERED]"}}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fea58da3"], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 6.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7a9a6f9b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_7a9a6f9b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:22:31 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_7a9a6f9b", "password" => "[FILTERED]", "user" => {"username" => "testuser_7a9a6f9b", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7a9a6f9b"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_cf33fd0a"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_cf33fd0a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:22:31 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_cf33fd0a", "password" => "[FILTERED]", "user" => {"username" => "testuser_cf33fd0a", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_cf33fd0a"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:22:31 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:19:in 'ActionDispatch::Integration::RequestHelpers#get'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#get'
spec/requests/api_users_spec.rb:53:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:19:in 'ActionDispatch::Integration::RequestHelpers#get'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#get'
spec/requests/api_users_spec.rb:53:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 17:22:32 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | GC: 0.0ms)
Completed 200 OK in 138ms (Views: 17.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 17:25:33 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_ffb24341", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_ffb24341", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ffb24341"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_ffb24341"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 43ms (Views: 0.3ms | ActiveRecord: 10.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_51c41c67"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_51c41c67"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:25:33 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_51c41c67", "password" => "[FILTERED]", "user" => {"username" => "testuser_51c41c67", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_51c41c67"], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_47ab9045"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_47ab9045"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:25:33 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_47ab9045", "password" => "[FILTERED]", "user" => {"username" => "testuser_47ab9045", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_47ab9045"], ["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 2.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_621b7ed8"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_621b7ed8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:25:33 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_621b7ed8", "password" => "[FILTERED]", "user" => {"username" => "testuser_621b7ed8", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_621b7ed8"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:25:33 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:19:in 'ActionDispatch::Integration::RequestHelpers#get'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#get'
spec/requests/api_users_spec.rb:53:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack-test (2.2.0) lib/rack/test.rb:360:in 'Rack::Test::Session#process_request'
rack-test (2.2.0) lib/rack/test.rb:153:in 'Rack::Test::Session#request'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:297:in 'ActionDispatch::Integration::Session#process'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:19:in 'ActionDispatch::Integration::RequestHelpers#get'
actionpack (8.0.2.1) lib/action_dispatch/testing/integration.rb:388:in 'ActionDispatch::Integration::Runner#get'
spec/requests/api_users_spec.rb:53:in 'block (3 levels) in <top (required)>'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-rails (6.1.5) lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
rspec-core (3.13.5) lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
rspec-core (3.13.5) lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
rspec-core (3.13.5) lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
rspec-core (3.13.5) lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'Array#map'
rspec-core (3.13.5) lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
rspec-core (3.13.5) lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
rspec-core (3.13.5) lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
rspec-core (3.13.5) lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
rspec-core (3.13.5) lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
rspec-core (3.13.5) exe/rspec:4:in '<top (required)>'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Kernel#load'
C:/Ruby34-x64/lib/ruby/site_ruby/3.4.0/rubygems.rb:319:in 'Gem.activate_and_load_bin_path'
C:/Ruby34-x64/bin/rspec:36:in '<main>'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 17:25:33 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | GC: 0.0ms)
Completed 200 OK in 154ms (Views: 22.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:29:09 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 26.6ms | GC: 0.0ms)
Completed 200 OK in 72ms (Views: 52.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:29:09 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:29:09 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:29:09 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:29:10 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 8.1ms | ActiveRecord: 10.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:29:10 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:29:10 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 7.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:29:10 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:29:11 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:29:11 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:29:11 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 17:31:15 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_c97484ae", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_c97484ae", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c97484ae"], ["LIMIT", 1]]
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_c97484ae"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 44ms (Views: 0.3ms | ActiveRecord: 13.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5ae81beb"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_5ae81beb"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:31:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_5ae81beb", "password" => "[FILTERED]", "user" => {"username" => "testuser_5ae81beb", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5ae81beb"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_96ff880b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_96ff880b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:31:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_96ff880b", "password" => "[FILTERED]", "user" => {"username" => "testuser_96ff880b", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_96ff880b"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6f897a41"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_6f897a41"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:31:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_6f897a41", "password" => "[FILTERED]", "user" => {"username" => "testuser_6f897a41", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6f897a41"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-23 17:31:15 +0100
  
ActionController::RoutingError (No route matches [GET] "/test/logout"):
  
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 17:31:16 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.0ms)
Completed 200 OK in 210ms (Views: 16.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (10.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 17:32:22 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_7e87dac4", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_7e87dac4", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7e87dac4"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_7e87dac4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 58ms (Views: 0.2ms | ActiveRecord: 20.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6db7044c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_6db7044c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:32:22 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_6db7044c", "password" => "[FILTERED]", "user" => {"username" => "testuser_6db7044c", "password" => "[FILTERED]"}}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6db7044c"], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 5.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fcbb10cf"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_fcbb10cf"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:32:22 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_fcbb10cf", "password" => "[FILTERED]", "user" => {"username" => "testuser_fcbb10cf", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fcbb10cf"], ["LIMIT", 1]]
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 1.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_130a7abd"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_130a7abd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 17:32:22 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_130a7abd", "password" => "[FILTERED]", "user" => {"username" => "testuser_130a7abd", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_130a7abd"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-23 17:32:22 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 17:32:22 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | GC: 0.0ms)
Completed 200 OK in 140ms (Views: 25.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:33:40 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | GC: 0.0ms)
Completed 200 OK in 53ms (Views: 29.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:33:40 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:33:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:33:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:33:41 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 40ms (Views: 3.9ms | ActiveRecord: 12.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:33:41 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:33:41 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 7.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:33:41 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:33:42 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 2.7ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:33:42 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:33:42 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:37:44 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | GC: 0.0ms)
Completed 200 OK in 64ms (Views: 36.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:37:44 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:37:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:37:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:37:45 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 4.5ms | ActiveRecord: 10.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:37:45 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:37:45 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 3.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:37:45 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:37:46 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 5ms (ActiveRecord: 2.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:37:46 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:37:46 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:42:48 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | GC: 0.0ms)
Completed 200 OK in 72ms (Views: 39.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:42:49 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:42:49 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:42:49 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:42:49 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.0ms)
Completed 200 OK in 59ms (Views: 9.1ms | ActiveRecord: 14.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:42:50 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:42:50 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 4.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:42:50 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:42:50 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:42:50 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:42:50 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:42:51 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 17:42:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:46:52 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 34.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:46:53 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:46:53 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:46:53 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:46:54 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 34ms (ActiveRecord: 9.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:46:54 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 4.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:46:54 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:48:01 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 32.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:48:01 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:48:01 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:48:02 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:48:03 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 56ms (ActiveRecord: 16.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:48:03 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 5.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:48:03 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:48:47 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | GC: 0.0ms)
Completed 200 OK in 64ms (Views: 42.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:48:47 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:48:48 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:48:48 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:48:48 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 39ms (ActiveRecord: 12.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:48:49 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 4.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:48:49 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:49:20 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | GC: 0.0ms)
Completed 200 OK in 54ms (Views: 33.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:49:20 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:49:20 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:49:20 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:49:21 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 38ms (ActiveRecord: 12.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:49:21 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 3.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:49:21 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:49:49 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
Completed 200 OK in 62ms (Views: 36.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:49:49 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:49:49 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:49:49 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:49:50 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 38ms (ActiveRecord: 12.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:49:50 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 5.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:49:50 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:50:17 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 24.5ms | GC: 0.0ms)
Completed 200 OK in 91ms (Views: 53.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:50:18 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:50:18 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:50:18 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:50:19 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/login
Completed 302 Found in 44ms (ActiveRecord: 12.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:50:19 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 6.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:50:19 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (8.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:50:59 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 29.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:50:59 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:50:59 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:51:00 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:51:00 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 46ms (Views: 4.5ms | ActiveRecord: 12.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:51:00 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:51:01 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 7.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:51:01 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:51:01 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 3.4ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:51:01 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:51:01 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:51:29 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 8.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.8ms | GC: 0.0ms)
Completed 200 OK in 72ms (Views: 45.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:51:29 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:51:29 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:51:29 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:51:30 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 56ms (Views: 6.3ms | ActiveRecord: 13.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:51:30 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:51:30 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 4.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:51:30 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:51:31 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 3.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:51:31 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:51:31 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:52:42 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 8.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.5ms | GC: 0.0ms)
Completed 200 OK in 89ms (Views: 64.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:52:42 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:52:42 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:52:42 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:52:43 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (7.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 79ms (Views: 4.2ms | ActiveRecord: 48.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:52:43 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:52:43 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 4.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:52:43 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:52:44 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 2.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:52:44 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:52:44 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:52:44 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 17:52:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:53:40 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 11.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 32.9ms | GC: 0.0ms)
Completed 200 OK in 78ms (Views: 51.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:53:41 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:53:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:53:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 5.7ms | ActiveRecord: 10.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 8.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:53:42 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 17:53:43 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:55:12 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.8ms | GC: 0.0ms)
Completed 200 OK in 67ms (Views: 48.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:55:12 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:55:12 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:55:12 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:55:13 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 51ms (Views: 7.0ms | ActiveRecord: 13.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:55:13 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:55:14 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 5.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:55:14 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:55:14 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 2.8ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:55:14 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:55:14 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:55:14 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 17:55:14 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:57:39 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.4ms | GC: 0.2ms)
Completed 200 OK in 66ms (Views: 38.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:57:39 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:57:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:57:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:57:40 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 8.5ms | ActiveRecord: 15.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:57:40 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:57:40 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 5.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:57:40 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:57:41 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 6.1ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:57:41 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:57:41 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:57:41 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 17:57:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:58:36 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | GC: 0.0ms)
Completed 200 OK in 63ms (Views: 39.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:58:36 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:58:36 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:58:37 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:58:38 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.2ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 3.5ms | ActiveRecord: 13.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:58:38 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:58:38 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:58:38 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:58:38 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:58:38 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:58:38 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:58:39 +0100
  
ActionController::RoutingError (uninitialized constant UsersController)
Caused by: ActionDispatch::MissingController (uninitialized constant UsersController)
Caused by: NameError (uninitialized constant UsersController)

Information for: ActionController::RoutingError (uninitialized constant UsersController):
  

Information for cause: ActionDispatch::MissingController (uninitialized constant UsersController):
  
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:102:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: NameError (uninitialized constant UsersController):
  
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'Module#const_get'
activesupport (8.0.2.1) lib/active_support/inflector/methods.rb:290:in 'ActiveSupport::Inflector#constantize'
activesupport (8.0.2.1) lib/active_support/core_ext/string/inflections.rb:74:in 'String#constantize'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:99:in 'ActionDispatch::Request#controller_class_for'
actionpack (8.0.2.1) lib/action_dispatch/http/request.rb:91:in 'ActionDispatch::Request#controller_class'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:61:in 'ActionDispatch::Routing::RouteSet::Dispatcher#controller'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:48:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.1) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.2.1) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in 'ActionDispatch::PermissionsPolicy::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in 'ActionDispatch::Cookies#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.1) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.1) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.1) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.2.1) lib/rails/engine.rb:535:in 'Rails::Engine#call'
rack (3.2.1) lib/rack/urlmap.rb:76:in 'block in Rack::URLMap#call'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Array#each'
rack (3.2.1) lib/rack/urlmap.rb:60:in 'Rack::URLMap#call'
rack (3.2.1) lib/rack/builder.rb:283:in 'Rack::Builder#call'
capybara (3.40.0) lib/capybara/server/middleware.rb:60:in 'Capybara::Server::Middleware#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-23 17:58:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 17:59:24 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | GC: 0.0ms)
Completed 200 OK in 63ms (Views: 37.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:59:24 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 17:59:24 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 17:59:24 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 17:59:25 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 51ms (Views: 4.6ms | ActiveRecord: 12.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:59:25 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:59:25 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:59:25 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 17:59:26 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Log ind"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 17:59:26 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:59:26 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 17:59:26 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 17:59:26 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 17:59:26 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (15.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 18:00:29 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | GC: 0.0ms)
Completed 200 OK in 63ms (Views: 32.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:00:29 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 18:00:30 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 18:00:30 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 18:00:30 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 4.0ms | ActiveRecord: 9.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:00:30 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 18:00:31 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 4.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:00:31 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 18:02:32 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | GC: 0.0ms)
Completed 200 OK in 57ms (Views: 33.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:02:32 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 18:02:32 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 18:02:33 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 18:02:34 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 59ms (Views: 8.0ms | ActiveRecord: 17.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:02:34 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 18:02:34 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 3.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:02:34 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 18:02:34 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 12ms (ActiveRecord: 4.9ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 18:02:34 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:02:34 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 18:02:35 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 18:02:35 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:02:35 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 18:03:33 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | GC: 0.0ms)
Completed 200 OK in 69ms (Views: 37.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:03:33 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 18:03:33 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 18:03:33 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 18:03:34 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 3.5ms | ActiveRecord: 12.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:03:35 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 18:03:35 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 5.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:03:35 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 18:03:35 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 11ms (ActiveRecord: 5.0ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 18:03:35 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 7.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:03:35 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 18:03:36 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 18:03:36 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:03:36 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-23 18:27:15 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_7c9be126", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_7c9be126", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7c9be126"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_7c9be126"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 69ms (Views: 0.5ms | ActiveRecord: 13.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a60cf330"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_a60cf330"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 18:27:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_a60cf330", "password" => "[FILTERED]", "user" => {"username" => "testuser_a60cf330", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a60cf330"], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e3afe46a"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_e3afe46a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 18:27:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_e3afe46a", "password" => "[FILTERED]", "user" => {"username" => "testuser_e3afe46a", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e3afe46a"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_24dc3b70"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_24dc3b70"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-23 18:27:15 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_24dc3b70", "password" => "[FILTERED]", "user" => {"username" => "testuser_24dc3b70", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_24dc3b70"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-23 18:27:15 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-23 18:27:15 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.1ms | GC: 0.0ms)
Completed 200 OK in 188ms (Views: 28.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-23 18:27:41 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 31.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:27:41 +0100
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-23 18:27:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-23 18:27:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-23 18:27:42 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 51ms (ActiveRecord: 14.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-11-23 18:27:42 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:27:42 +0100
Started GET "/login" for 127.0.0.1 at 2025-11-23 18:27:42 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:27:42 +0100
Started POST "/api/login" for 127.0.0.1 at 2025-11-23 18:27:43 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-23 18:27:43 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:27:43 +0100
Started GET "/logout" for 127.0.0.1 at 2025-11-23 18:27:43 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-23 18:27:43 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/assets/tailwindcss" for 127.0.0.1 at 2025-11-23 18:27:43 +0100
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-24 12:11:35 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_de2efd71", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_de2efd71", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_de2efd71"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_de2efd71"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 82ms (Views: 0.6ms | ActiveRecord: 18.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6b42f53e"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_6b42f53e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-24 12:11:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_6b42f53e", "password" => "[FILTERED]", "user" => {"username" => "testuser_6b42f53e", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6b42f53e"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_16084ac9"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_16084ac9"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-24 12:11:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_16084ac9", "password" => "[FILTERED]", "user" => {"username" => "testuser_16084ac9", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_16084ac9"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ebc75b19"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "testuser_ebc75b19"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-24 12:11:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_ebc75b19", "password" => "[FILTERED]", "user" => {"username" => "testuser_ebc75b19", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ebc75b19"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-24 12:11:35 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-24 12:11:35 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.0ms)
Completed 200 OK in 169ms (Views: 30.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-24 12:11:40 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 15.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 25.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-24 12:11:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-24 12:11:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-24 12:11:41 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 11ms (ActiveRecord: 4.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-11-24 12:11:41 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-24 12:11:41 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-11-24 12:11:42 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-24 12:11:42 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-24 12:11:42 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-24 12:11:42 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (8.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 13:56:39 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_395feb3d", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_395feb3d", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_395feb3d"], ["LIMIT", 1]]
  [1m[36mUser Create (4.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_395feb3d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:56:40.054924"], ["updated_at", "2025-11-27 12:56:40.054924"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 97ms (Views: 0.3ms | ActiveRecord: 17.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2fbe6041"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2fbe6041"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:56:40.096520"], ["updated_at", "2025-11-27 12:56:40.096520"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 13:56:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_2fbe6041", "password" => "[FILTERED]", "user" => {"username" => "testuser_2fbe6041", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2fbe6041"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_2fbe6041 id=145
  [1m[36mUser Update (4.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 12:56:40.105269"], ["id", 145]]
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 6.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_64221366"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_64221366"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:56:40.120326"], ["updated_at", "2025-11-27 12:56:40.120326"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 13:56:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_64221366", "password" => "[FILTERED]", "user" => {"username" => "testuser_64221366", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_64221366"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bf3dd947"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bf3dd947"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:56:40.140301"], ["updated_at", "2025-11-27 12:56:40.140301"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 13:56:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_bf3dd947", "password" => "[FILTERED]", "user" => {"username" => "testuser_bf3dd947", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bf3dd947"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_bf3dd947 id=147
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 12:56:40.148001"], ["id", 147]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 13:56:40 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-27 13:56:40 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.8ms | GC: 0.0ms)
Completed 200 OK in 182ms (Views: 24.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 13:59:23 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_f73c9909", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_f73c9909", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f73c9909"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_f73c9909"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:59:23.921906"], ["updated_at", "2025-11-27 12:59:23.921906"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 43ms (Views: 0.2ms | ActiveRecord: 12.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_20d60864"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_20d60864"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:59:23.936471"], ["updated_at", "2025-11-27 12:59:23.936471"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 13:59:23 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_20d60864", "password" => "[FILTERED]", "user" => {"username" => "testuser_20d60864", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_20d60864"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_20d60864 id=149
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 12:59:23.945450"], ["id", 149]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 4.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3fc9a31a"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3fc9a31a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:59:23.957971"], ["updated_at", "2025-11-27 12:59:23.957971"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 13:59:23 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_3fc9a31a", "password" => "[FILTERED]", "user" => {"username" => "testuser_3fc9a31a", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3fc9a31a"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b9660116"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_b9660116"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 12:59:23.972906"], ["updated_at", "2025-11-27 12:59:23.972906"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 13:59:23 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_b9660116", "password" => "[FILTERED]", "user" => {"username" => "testuser_b9660116", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b9660116"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_b9660116 id=151
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 12:59:23.979800"], ["id", 151]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 13:59:23 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-27 13:59:24 +0100
Processing by WeatherController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | GC: 0.0ms)
Completed 200 OK in 176ms (Views: 26.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-27 14:00:54 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | GC: 0.0ms)
Completed 200 OK in 58ms (Views: 34.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-27 14:00:54 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-27 14:00:54 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-27 14:00:55 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (22.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 13:00:55.429190"], ["updated_at", "2025-11-27 13:00:55.429190"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 63ms (ActiveRecord: 34.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-11-27 14:00:55 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 3.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 14:00:55 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-11-27 14:00:56 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=152
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 13:00:56.117395"], ["id", 152]]
Redirected to http://localhost:3000/
Completed 302 Found in 13ms (ActiveRecord: 5.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-27 14:00:56 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 8.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-27 14:00:56 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 14:00:56 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
Started GET "/metrics" for 127.0.0.1 at 2025-11-27 14:01:05 +0100
Processing by MetricsController#index as HTML
  [1m[36mUser Count (17.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  Rendering text template
  Rendered text template (Duration: 0.1ms | GC: 0.0ms)
Completed 200 OK in 562ms (Views: 282.5ms | ActiveRecord: 17.2ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/metrics" for 127.0.0.1 at 2025-11-27 14:01:20 +0100
Processing by MetricsController#index as HTML
  [1m[36mUser Count (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  Rendering text template
  Rendered text template (Duration: 0.1ms | GC: 0.0ms)
Completed 200 OK in 106ms (Views: 4.1ms | ActiveRecord: 5.3ms (1 query, 0 cached) | GC: 0.2ms)
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 20:31:35 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_a33baf37", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_a33baf37", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a33baf37"], ["LIMIT", 1]]
  [1m[36mUser Create (3.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a33baf37"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:31:35.363105"], ["updated_at", "2025-11-27 19:31:35.363105"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 59ms (Views: 0.2ms | ActiveRecord: 37.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a8ac70d0"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a8ac70d0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:31:35.383061"], ["updated_at", "2025-11-27 19:31:35.383061"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:31:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_a8ac70d0", "password" => "[FILTERED]", "user" => {"username" => "testuser_a8ac70d0", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a8ac70d0"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_a8ac70d0 id=154
  [1m[36mUser Update (2.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:31:35.391631"], ["id", 154]]
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 5.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7da191fb"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7da191fb"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:31:35.404383"], ["updated_at", "2025-11-27 19:31:35.404383"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:31:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_7da191fb", "password" => "[FILTERED]", "user" => {"username" => "testuser_7da191fb", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7da191fb"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_65d4dc09"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_65d4dc09"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:31:35.420942"], ["updated_at", "2025-11-27 19:31:35.420942"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:31:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_65d4dc09", "password" => "[FILTERED]", "user" => {"username" => "testuser_65d4dc09", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_65d4dc09"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_65d4dc09 id=156
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:31:35.429025"], ["id", 156]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 20:31:35 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-27 20:31:35 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-11-27 19:31:35.479829"], ["updated_at", "2025-11-27 19:31:35.479829"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | GC: 0.0ms)
Completed 200 OK in 316ms (Views: 22.2ms | ActiveRecord: 9.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-27 20:31:40 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 16.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-27 20:31:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-27 20:31:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-27 20:31:41 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:31:41.618486"], ["updated_at", "2025-11-27 19:31:41.618486"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 9ms (ActiveRecord: 3.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-11-27 20:31:41 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 20:31:41 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-11-27 20:31:42 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=157
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:31:42.153831"], ["id", 157]]
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-27 20:31:42 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-27 20:31:42 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 20:31:42 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 20:39:24 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_074826e1", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_074826e1", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_074826e1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_074826e1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:39:24.917536"], ["updated_at", "2025-11-27 19:39:24.917536"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 54ms (Views: 0.2ms | ActiveRecord: 13.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0162a1f6"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0162a1f6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:39:24.940229"], ["updated_at", "2025-11-27 19:39:24.940229"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:39:24 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_0162a1f6", "password" => "[FILTERED]", "user" => {"username" => "testuser_0162a1f6", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0162a1f6"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_0162a1f6 id=159
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:39:24.951398"], ["id", 159]]
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 3.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6760ee65"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6760ee65"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:39:24.963334"], ["updated_at", "2025-11-27 19:39:24.963334"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:39:24 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_6760ee65", "password" => "[FILTERED]", "user" => {"username" => "testuser_6760ee65", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6760ee65"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2aec0c69"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2aec0c69"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:39:24.975555"], ["updated_at", "2025-11-27 19:39:24.975555"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:39:24 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_2aec0c69", "password" => "[FILTERED]", "user" => {"username" => "testuser_2aec0c69", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2aec0c69"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_2aec0c69 id=161
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:39:24.980576"], ["id", 161]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 20:39:24 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 20:41:16 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_985c5719", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_985c5719", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_985c5719"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_985c5719"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:16.505935"], ["updated_at", "2025-11-27 19:41:16.505935"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 43ms (Views: 0.2ms | ActiveRecord: 12.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9c16d09b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9c16d09b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:16.525196"], ["updated_at", "2025-11-27 19:41:16.525196"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:41:16 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_9c16d09b", "password" => "[FILTERED]", "user" => {"username" => "testuser_9c16d09b", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9c16d09b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9c16d09b id=163
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:41:16.535250"], ["id", 163]]
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 4.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5e37761c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5e37761c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:16.554072"], ["updated_at", "2025-11-27 19:41:16.554072"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:41:16 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_5e37761c", "password" => "[FILTERED]", "user" => {"username" => "testuser_5e37761c", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5e37761c"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1691939b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1691939b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:16.577461"], ["updated_at", "2025-11-27 19:41:16.577461"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:41:16 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_1691939b", "password" => "[FILTERED]", "user" => {"username" => "testuser_1691939b", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1691939b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1691939b id=165
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:41:16.587896"], ["id", 165]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 20:41:16 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 20:41:34 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_0a05f7b0", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_0a05f7b0", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0a05f7b0"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0a05f7b0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:34.696087"], ["updated_at", "2025-11-27 19:41:34.696087"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 56ms (Views: 0.2ms | ActiveRecord: 15.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_33848def"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_33848def"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:34.732605"], ["updated_at", "2025-11-27 19:41:34.732605"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:41:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_33848def", "password" => "[FILTERED]", "user" => {"username" => "testuser_33848def", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_33848def"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_33848def id=167
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:41:34.744408"], ["id", 167]]
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 4.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5ba01137"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5ba01137"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:34.754584"], ["updated_at", "2025-11-27 19:41:34.754584"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:41:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_5ba01137", "password" => "[FILTERED]", "user" => {"username" => "testuser_5ba01137", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5ba01137"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d4eddf80"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d4eddf80"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:41:34.769842"], ["updated_at", "2025-11-27 19:41:34.769842"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:41:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_d4eddf80", "password" => "[FILTERED]", "user" => {"username" => "testuser_d4eddf80", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d4eddf80"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d4eddf80 id=169
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:41:34.778879"], ["id", 169]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 20:41:34 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 20:42:20 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_a5512f19", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_a5512f19", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a5512f19"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a5512f19"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:42:21.070433"], ["updated_at", "2025-11-27 19:42:21.070433"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 41ms (Views: 0.2ms | ActiveRecord: 10.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6280e10f"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6280e10f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:42:21.093564"], ["updated_at", "2025-11-27 19:42:21.093564"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:42:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_6280e10f", "password" => "[FILTERED]", "user" => {"username" => "testuser_6280e10f", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6280e10f"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6280e10f id=171
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:42:21.106713"], ["id", 171]]
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_973c9599"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_973c9599"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:42:21.119062"], ["updated_at", "2025-11-27 19:42:21.119062"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:42:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_973c9599", "password" => "[FILTERED]", "user" => {"username" => "testuser_973c9599", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_973c9599"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_64fe5836"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_64fe5836"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:42:21.134771"], ["updated_at", "2025-11-27 19:42:21.134771"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:42:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_64fe5836", "password" => "[FILTERED]", "user" => {"username" => "testuser_64fe5836", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_64fe5836"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_64fe5836 id=173
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:42:21.140869"], ["id", 173]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 20:42:21 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 20:45:43 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_bba7d5da", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_bba7d5da", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bba7d5da"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bba7d5da"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:45:43.588110"], ["updated_at", "2025-11-27 19:45:43.588110"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 73ms (Views: 0.4ms | ActiveRecord: 16.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_718134b9"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_718134b9"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:45:43.610244"], ["updated_at", "2025-11-27 19:45:43.610244"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:45:43 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_718134b9", "password" => "[FILTERED]", "user" => {"username" => "testuser_718134b9", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_718134b9"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_718134b9 id=175
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:45:43.620161"], ["id", 175]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f499267"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9f499267"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:45:43.631705"], ["updated_at", "2025-11-27 19:45:43.631705"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:45:43 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_9f499267", "password" => "[FILTERED]", "user" => {"username" => "testuser_9f499267", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f499267"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_86d19467"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_86d19467"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:45:43.649882"], ["updated_at", "2025-11-27 19:45:43.649882"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:45:43 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_86d19467", "password" => "[FILTERED]", "user" => {"username" => "testuser_86d19467", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_86d19467"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_86d19467 id=177
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:45:43.657104"], ["id", 177]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 20:45:43 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-27 20:45:43 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-11-27 19:45:43.696159"], ["updated_at", "2025-11-27 19:45:43.696159"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | GC: 0.0ms)
Completed 200 OK in 195ms (Views: 21.4ms | ActiveRecord: 9.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-27 20:45:48 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 10.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | GC: 0.2ms)
Completed 200 OK in 27ms (Views: 25.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-27 20:45:48 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-27 20:45:48 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-27 20:45:49 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:45:49.369587"], ["updated_at", "2025-11-27 19:45:49.369587"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-11-27 20:45:49 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 20:45:49 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started POST "/api/login" for 127.0.0.1 at 2025-11-27 20:45:49 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=178
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:45:49.941483"], ["id", 178]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-27 20:45:49 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-27 20:45:50 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 20:45:50 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 20:56:23 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_7cf0346e", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_7cf0346e", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7cf0346e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7cf0346e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:56:23.364880"], ["updated_at", "2025-11-27 19:56:23.364880"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 65ms (Views: 0.2ms | ActiveRecord: 15.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_38daba66"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_38daba66"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:56:23.388273"], ["updated_at", "2025-11-27 19:56:23.388273"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:56:23 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_38daba66", "password" => "[FILTERED]", "user" => {"username" => "testuser_38daba66", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_38daba66"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_38daba66 id=180
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:56:23.400225"], ["id", 180]]
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 5.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8808adef"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8808adef"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:56:23.413873"], ["updated_at", "2025-11-27 19:56:23.413873"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:56:23 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_8808adef", "password" => "[FILTERED]", "user" => {"username" => "testuser_8808adef", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8808adef"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_69d40b7b"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_69d40b7b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:56:23.430865"], ["updated_at", "2025-11-27 19:56:23.430865"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 20:56:23 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_69d40b7b", "password" => "[FILTERED]", "user" => {"username" => "testuser_69d40b7b", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_69d40b7b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_69d40b7b id=182
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:56:23.437161"], ["id", 182]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 20:56:23 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-11-27 20:56:23 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-11-27 19:56:23.479357"], ["updated_at", "2025-11-27 19:56:23.479357"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | GC: 0.0ms)
Completed 200 OK in 190ms (Views: 16.7ms | ActiveRecord: 6.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-11-27 20:56:28 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 7.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 19.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-11-27 20:56:28 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-11-27 20:56:28 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-11-27 20:56:28 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 19:56:28.977876"], ["updated_at", "2025-11-27 19:56:28.977876"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 9ms (ActiveRecord: 5.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-11-27 20:56:28 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 20:56:29 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-11-27 20:56:29 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=183
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 19:56:29.674893"], ["id", 183]]
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-11-27 20:56:29 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-11-27 20:56:29 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-11-27 20:56:29 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 21:01:05 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_3992d6a5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_3992d6a5", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3992d6a5"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3992d6a5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:05.366967"], ["updated_at", "2025-11-27 20:01:05.366967"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 39ms (Views: 0.6ms | ActiveRecord: 10.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_de9a5463"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_de9a5463"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:05.388257"], ["updated_at", "2025-11-27 20:01:05.388257"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:01:05 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_de9a5463", "password" => "[FILTERED]", "user" => {"username" => "testuser_de9a5463", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_de9a5463"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_de9a5463 id=185
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:01:05.398972"], ["id", 185]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e1bce2ce"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e1bce2ce"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:05.420072"], ["updated_at", "2025-11-27 20:01:05.420072"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:01:05 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_e1bce2ce", "password" => "[FILTERED]", "user" => {"username" => "testuser_e1bce2ce", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e1bce2ce"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_982cfba2"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_982cfba2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:05.436834"], ["updated_at", "2025-11-27 20:01:05.436834"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:01:05 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_982cfba2", "password" => "[FILTERED]", "user" => {"username" => "testuser_982cfba2", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_982cfba2"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_982cfba2 id=187
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:01:05.443486"], ["id", 187]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 21:01:05 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 21:01:40 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_a44350a3", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_a44350a3", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a44350a3"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a44350a3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:40.732790"], ["updated_at", "2025-11-27 20:01:40.732790"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 54ms (Views: 0.2ms | ActiveRecord: 14.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_cdc99688"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_cdc99688"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:40.749486"], ["updated_at", "2025-11-27 20:01:40.749486"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:01:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_cdc99688", "password" => "[FILTERED]", "user" => {"username" => "testuser_cdc99688", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_cdc99688"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_cdc99688 id=189
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:01:40.761101"], ["id", 189]]
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 5.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d605f25f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d605f25f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:40.774413"], ["updated_at", "2025-11-27 20:01:40.774413"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:01:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_d605f25f", "password" => "[FILTERED]", "user" => {"username" => "testuser_d605f25f", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d605f25f"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c0a49065"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c0a49065"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:01:40.791298"], ["updated_at", "2025-11-27 20:01:40.791298"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:01:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_c0a49065", "password" => "[FILTERED]", "user" => {"username" => "testuser_c0a49065", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c0a49065"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_c0a49065 id=191
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:01:40.798687"], ["id", 191]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 21:01:40 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as HTML
  [1m[36mPage Load (4.4ms)[0m  [1m[34mSELECT "id", "pages"."title", "pages"."content" FROM "pages" ORDER BY "updated_at" DESC LIMIT $1[0m  [["LIMIT", 20]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 6.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as JSON
  Parameters: {"q" => "test"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSearchLog Create (7.1ms)[0m  [1m[32mINSERT INTO "search_logs" ("query", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["query", "test"], ["user_ip", "0.0.0.0"], ["created_at", "2025-11-27 20:01:40.865920"], ["updated_at", "2025-11-27 20:01:40.865920"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Search logged: test
Completed 500 Internal Server Error in 19ms (ActiveRecord: 12.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 21:03:00 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_35597342", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_35597342", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_35597342"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_35597342"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:00.238605"], ["updated_at", "2025-11-27 20:03:00.238605"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 48ms (Views: 0.2ms | ActiveRecord: 13.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d34cb8ec"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d34cb8ec"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:00.254980"], ["updated_at", "2025-11-27 20:03:00.254980"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:00 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_d34cb8ec", "password" => "[FILTERED]", "user" => {"username" => "testuser_d34cb8ec", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d34cb8ec"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d34cb8ec id=193
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:03:00.263762"], ["id", 193]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_194fa255"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_194fa255"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:00.274962"], ["updated_at", "2025-11-27 20:03:00.274962"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:00 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_194fa255", "password" => "[FILTERED]", "user" => {"username" => "testuser_194fa255", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_194fa255"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5f0b834e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5f0b834e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:00.290536"], ["updated_at", "2025-11-27 20:03:00.290536"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:00 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_5f0b834e", "password" => "[FILTERED]", "user" => {"username" => "testuser_5f0b834e", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5f0b834e"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_5f0b834e id=195
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:03:00.297846"], ["id", 195]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 21:03:00 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as HTML
  [1m[36mPage Load (1.3ms)[0m  [1m[34mSELECT "pages"."title", "pages"."content" FROM "pages" ORDER BY "updated_at" DESC LIMIT $1[0m  [["LIMIT", 20]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as JSON
  Parameters: {"q" => "test"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSearchLog Create (2.1ms)[0m  [1m[32mINSERT INTO "search_logs" ("query", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["query", "test"], ["user_ip", "0.0.0.0"], ["created_at", "2025-11-27 20:03:00.359954"], ["updated_at", "2025-11-27 20:03:00.359954"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Search logged: test
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 6.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 21:03:18 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_cdb9ce9e", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_cdb9ce9e", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_cdb9ce9e"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_cdb9ce9e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:18.955359"], ["updated_at", "2025-11-27 20:03:18.955359"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 40ms (Views: 0.2ms | ActiveRecord: 9.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_02241595"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_02241595"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:18.972611"], ["updated_at", "2025-11-27 20:03:18.972611"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:18 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_02241595", "password" => "[FILTERED]", "user" => {"username" => "testuser_02241595", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_02241595"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_02241595 id=197
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:03:18.985934"], ["id", 197]]
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 5.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_854de8f9"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_854de8f9"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:18.999763"], ["updated_at", "2025-11-27 20:03:18.999763"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_854de8f9", "password" => "[FILTERED]", "user" => {"username" => "testuser_854de8f9", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_854de8f9"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a9b4061f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a9b4061f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:19.014881"], ["updated_at", "2025-11-27 20:03:19.014881"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_a9b4061f", "password" => "[FILTERED]", "user" => {"username" => "testuser_a9b4061f", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a9b4061f"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_a9b4061f id=199
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:03:19.021919"], ["id", 199]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 21:03:19 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as HTML
  [1m[36mPage Load (1.2ms)[0m  [1m[34mSELECT "pages"."title", "pages"."content" FROM "pages" ORDER BY "updated_at" DESC LIMIT $1[0m  [["LIMIT", 20]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as JSON
  Parameters: {"q" => "test"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSearchLog Create (1.6ms)[0m  [1m[32mINSERT INTO "search_logs" ("query", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["query", "test"], ["user_ip", "0.0.0.0"], ["created_at", "2025-11-27 20:03:19.076344"], ["updated_at", "2025-11-27 20:03:19.076344"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Search logged: test
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 5.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-11-27 21:03:40 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_ccf8e921", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_ccf8e921", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ccf8e921"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ccf8e921"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:40.303661"], ["updated_at", "2025-11-27 20:03:40.303661"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 45ms (Views: 0.3ms | ActiveRecord: 10.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3af683b4"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3af683b4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:40.322770"], ["updated_at", "2025-11-27 20:03:40.322770"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_3af683b4", "password" => "[FILTERED]", "user" => {"username" => "testuser_3af683b4", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3af683b4"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_3af683b4 id=201
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:03:40.331018"], ["id", 201]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ea9216e7"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ea9216e7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:40.339920"], ["updated_at", "2025-11-27 20:03:40.339920"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_ea9216e7", "password" => "[FILTERED]", "user" => {"username" => "testuser_ea9216e7", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ea9216e7"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ad13ac51"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ad13ac51"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-11-27 20:03:40.352492"], ["updated_at", "2025-11-27 20:03:40.352492"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-11-27 21:03:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_ad13ac51", "password" => "[FILTERED]", "user" => {"username" => "testuser_ad13ac51", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ad13ac51"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_ad13ac51 id=203
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-11-27 20:03:40.358690"], ["id", 203]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-11-27 21:03:40 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as HTML
  [1m[36mPage Load (24.1ms)[0m  [1m[34mSELECT "pages"."title", "pages"."content" FROM "pages" ORDER BY "pages"."last_updated" DESC LIMIT $1[0m  [["LIMIT", 20]]
  Rendering layout layouts/application.html.erb
  Rendering search/index.html.erb within layouts/application
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
  Rendered search/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 49ms (Views: 17.4ms | ActiveRecord: 26.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Processing by Api::SearchController#index as JSON
  Parameters: {"q" => "test"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSearchLog Create (1.9ms)[0m  [1m[32mINSERT INTO "search_logs" ("query", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["query", "test"], ["user_ip", "0.0.0.0"], ["created_at", "2025-11-27 20:03:40.451865"], ["updated_at", "2025-11-27 20:03:40.451865"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Search logged: test
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 6.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-03 12:52:27 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_d1bc0a6f", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_d1bc0a6f", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d1bc0a6f"], ["LIMIT", 1]]
  [1m[36mUser Create (4.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d1bc0a6f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:52:29.029115"], ["updated_at", "2025-12-03 11:52:29.029115"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 470ms (Views: 0.4ms | ActiveRecord: 62.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_56670d91"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_56670d91"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:52:29.110229"], ["updated_at", "2025-12-03 11:52:29.110229"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-03 12:52:29 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_56670d91", "password" => "[FILTERED]", "user" => {"username" => "testuser_56670d91", "password" => "[FILTERED]"}}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_56670d91"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_56670d91 id=316
  [1m[36mUser Update (3.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-03 11:52:29.128996"], ["id", 316]]
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 10.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bac6615c"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bac6615c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:52:29.150680"], ["updated_at", "2025-12-03 11:52:29.150680"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-03 12:52:29 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_bac6615c", "password" => "[FILTERED]", "user" => {"username" => "testuser_bac6615c", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bac6615c"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_32507217"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_32507217"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:52:29.175607"], ["updated_at", "2025-12-03 11:52:29.175607"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-03 12:52:29 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_32507217", "password" => "[FILTERED]", "user" => {"username" => "testuser_32507217", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_32507217"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_32507217 id=318
  [1m[36mUser Update (2.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-03 11:52:29.207738"], ["id", 318]]
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 4.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-03 12:52:29 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 97ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-03 12:52:29 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-03 11:52:29.490107"], ["updated_at", "2025-12-03 11:52:29.490107"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 93.7ms | GC: 0.0ms)
Completed 200 OK in 980ms (Views: 222.0ms | ActiveRecord: 7.2ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-03 12:52:37 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 67.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 69.6ms | GC: 0.0ms)
Completed 200 OK in 80ms (Views: 79.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-03 12:52:37 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-03 12:52:38 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:52:38.733596"], ["updated_at", "2025-12-03 11:52:38.733596"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 13ms (ActiveRecord: 6.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-03 12:52:38 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.png" for 127.0.0.1 at 2025-12-03 12:52:38 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-03 12:52:38 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/login" for 127.0.0.1 at 2025-12-03 12:52:39 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | GC: 0.0ms)
Completed 200 OK in 105ms (Views: 102.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-03 12:52:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-03 12:52:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/login" for 127.0.0.1 at 2025-12-03 12:52:40 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=319
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-03 11:52:40.099102"], ["id", 319]]
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-03 12:52:40 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 8.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-03 12:52:40 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-03 12:52:40 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-03 12:54:30 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"username" => "testuser_80209e0e", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "user" => {"username" => "testuser_80209e0e", "email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_80209e0e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_80209e0e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:54:30.443351"], ["updated_at", "2025-12-03 11:54:30.443351"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 53ms (Views: 0.4ms | ActiveRecord: 13.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8fa6416"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d8fa6416"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:54:30.463428"], ["updated_at", "2025-12-03 11:54:30.463428"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-03 12:54:30 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_d8fa6416", "password" => "[FILTERED]", "user" => {"username" => "testuser_d8fa6416", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8fa6416"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d8fa6416 id=321
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-03 11:54:30.473506"], ["id", 321]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_16d8597f"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_16d8597f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:54:30.487860"], ["updated_at", "2025-12-03 11:54:30.487860"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-03 12:54:30 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_16d8597f", "password" => "[FILTERED]", "user" => {"username" => "testuser_16d8597f", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_16d8597f"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.3ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f4f5a512"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_f4f5a512"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:54:30.509014"], ["updated_at", "2025-12-03 11:54:30.509014"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-03 12:54:30 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"username" => "testuser_f4f5a512", "password" => "[FILTERED]", "user" => {"username" => "testuser_f4f5a512", "password" => "[FILTERED]"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f4f5a512"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_f4f5a512 id=323
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-03 11:54:30.522127"], ["id", 323]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-03 12:54:30 +0100
Processing by Test::UsersController#logout as JSON
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-03 12:54:30 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-03 11:54:30.607085"], ["updated_at", "2025-12-03 11:54:30.607085"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | GC: 0.0ms)
Completed 200 OK in 463ms (Views: 18.3ms | ActiveRecord: 8.8ms (1 query, 0 cached) | GC: 990.5ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-03 12:54:35 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | GC: 0.0ms)
Completed 200 OK in 30ms (Views: 28.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-03 12:54:35 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-03 12:54:35 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-03 12:54:36 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-03 11:54:36.682702"], ["updated_at", "2025-12-03 11:54:36.682702"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 11ms (ActiveRecord: 4.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-03 12:54:36 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-03 12:54:36 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 9.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-03 12:54:37 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=324
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-03 11:54:37.357710"], ["id", 324]]
Redirected to http://localhost:3000/
Completed 302 Found in 10ms (ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-03 12:54:37 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 10.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-03 12:54:37 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-03 12:54:37 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 22:50:58 +0100
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2c242bdc"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2c242bdc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:50:58.920865"], ["updated_at", "2025-12-04 21:50:58.920865"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:50:58 +0100
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_174c108b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_174c108b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:50:58.936344"], ["updated_at", "2025-12-04 21:50:58.936344"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:50:58 +0100
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ddcdfb77"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ddcdfb77"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:50:58.951433"], ["updated_at", "2025-12-04 21:50:58.951433"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:50:58 +0100
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 22:50:58 +0100
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 22:52:14 +0100
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_74636e20"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_74636e20"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:52:14.675607"], ["updated_at", "2025-12-04 21:52:14.675607"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:52:14 +0100
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7e89ac74"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7e89ac74"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:52:14.691052"], ["updated_at", "2025-12-04 21:52:14.691052"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:52:14 +0100
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_24006fa5"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_24006fa5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:52:14.704068"], ["updated_at", "2025-12-04 21:52:14.704068"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:52:14 +0100
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 22:52:14 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-04 21:52:14.832474"], ["updated_at", "2025-12-04 21:52:14.832474"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.1ms | GC: 0.0ms)
Completed 200 OK in 689ms (Views: 41.4ms | ActiveRecord: 8.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 22:53:16 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_5bba4daa", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_5bba4daa", "email" => "test_ff18f486@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5bba4daa"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5bba4daa"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:53:17.188261"], ["updated_at", "2025-12-04 21:53:17.188261"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=456 username=testuser_5bba4daa
Completed 201 Created in 96ms (Views: 0.3ms | ActiveRecord: 15.7ms (2 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6c719c88"], ["LIMIT", 1]]
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6c719c88"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:53:17.222547"], ["updated_at", "2025-12-04 21:53:17.222547"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:53:17 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6c719c88", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6c719c88", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6c719c88"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6c719c88 id=457
  [1m[36mUser Update (2.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 21:53:17.238916"], ["id", 457]]
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 6.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f11d72eb"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_f11d72eb"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:53:17.255184"], ["updated_at", "2025-12-04 21:53:17.255184"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:53:17 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_f11d72eb", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_f11d72eb", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f11d72eb"], ["LIMIT", 1]]
Login failed for username=testuser_f11d72eb
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f9f586c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9f9f586c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 21:53:17.276443"], ["updated_at", "2025-12-04 21:53:17.276443"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 22:53:17 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9f9f586c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9f9f586c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f9f586c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9f9f586c id=459
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 21:53:17.287158"], ["id", 459]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-04 22:53:17 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=459
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 22:53:17 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-04 21:53:17.356555"], ["updated_at", "2025-12-04 21:53:17.356555"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | GC: 0.0ms)
Completed 200 OK in 545ms (Views: 27.4ms | ActiveRecord: 7.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 23:14:33 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_550cdfa5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_550cdfa5", "email" => "test_5c30cbc5@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_550cdfa5"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_550cdfa5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:14:33.838831"], ["updated_at", "2025-12-04 22:14:33.838831"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=460 username=testuser_550cdfa5
Completed 201 Created in 64ms (Views: 0.3ms | ActiveRecord: 11.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_824f0ddd"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_824f0ddd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:14:33.857238"], ["updated_at", "2025-12-04 22:14:33.857238"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:14:33 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_824f0ddd", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_824f0ddd", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_824f0ddd"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_824f0ddd id=461
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:14:33.866726"], ["id", 461]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5b159c80"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5b159c80"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:14:33.877314"], ["updated_at", "2025-12-04 22:14:33.877314"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:14:33 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_5b159c80", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_5b159c80", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5b159c80"], ["LIMIT", 1]]
Login failed for username=testuser_5b159c80
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c807a75c"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c807a75c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:14:33.892146"], ["updated_at", "2025-12-04 22:14:33.892146"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:14:33 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_c807a75c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c807a75c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c807a75c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_c807a75c id=463
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:14:33.898496"], ["id", 463]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-04 23:14:33 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=463
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 23:14:33 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-04 22:14:33.943238"], ["updated_at", "2025-12-04 22:14:33.943238"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | GC: 0.0ms)
Completed 200 OK in 452ms (Views: 24.6ms | ActiveRecord: 6.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-04 23:14:50 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.4ms | GC: 0.0ms)
Completed 200 OK in 605ms (Views: 490.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.6ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-04 23:14:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-04 23:14:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-04 23:14:52 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:14:52.446496"], ["updated_at", "2025-12-04 22:14:52.446496"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 38ms (ActiveRecord: 9.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-04 23:14:52 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 2.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-04 23:14:52 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-04 23:14:52 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=464
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:14:52.952126"], ["id", 464]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 2.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-04 23:14:52 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-04 23:14:53 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-04 23:14:53 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 23:20:17 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_1de89bd7", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1de89bd7", "email" => "test_f9004d99@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1de89bd7"], ["LIMIT", 1]]
  [1m[36mUser Create (3.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1de89bd7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:20:17.876948"], ["updated_at", "2025-12-04 22:20:17.876948"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=465 username=testuser_1de89bd7
Completed 201 Created in 64ms (Views: 0.3ms | ActiveRecord: 16.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9da8d807"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9da8d807"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:20:17.898215"], ["updated_at", "2025-12-04 22:20:17.898215"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:20:17 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9da8d807", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9da8d807", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9da8d807"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9da8d807 id=466
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:20:17.908142"], ["id", 466]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4705f0f1"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4705f0f1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:20:17.922276"], ["updated_at", "2025-12-04 22:20:17.922276"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:20:17 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_4705f0f1", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4705f0f1", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4705f0f1"], ["LIMIT", 1]]
Login failed for username=testuser_4705f0f1
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bde7dcf8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bde7dcf8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:20:17.937354"], ["updated_at", "2025-12-04 22:20:17.937354"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:20:17 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_bde7dcf8", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_bde7dcf8", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bde7dcf8"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_bde7dcf8 id=468
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:20:17.945254"], ["id", 468]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-04 23:20:17 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=468
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 23:20:17 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-04 22:20:17.996388"], ["updated_at", "2025-12-04 22:20:17.996388"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | GC: 0.0ms)
Completed 200 OK in 459ms (Views: 23.0ms | ActiveRecord: 6.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 23:21:41 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_095c7e24", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_095c7e24", "email" => "test_cf94914b@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_095c7e24"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_095c7e24"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:41.827836"], ["updated_at", "2025-12-04 22:21:41.827836"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=469 username=testuser_095c7e24
Completed 201 Created in 69ms (Views: 0.3ms | ActiveRecord: 12.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7037f0e7"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7037f0e7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:41.853501"], ["updated_at", "2025-12-04 22:21:41.853501"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:21:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_7037f0e7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7037f0e7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7037f0e7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_7037f0e7 id=470
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:21:41.873222"], ["id", 470]]
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 9.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a4499040"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a4499040"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:41.886948"], ["updated_at", "2025-12-04 22:21:41.886948"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:21:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_a4499040", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a4499040", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a4499040"], ["LIMIT", 1]]
Login failed for username=testuser_a4499040
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c7bc42ea"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c7bc42ea"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:41.907530"], ["updated_at", "2025-12-04 22:21:41.907530"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:21:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_c7bc42ea", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c7bc42ea", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c7bc42ea"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_c7bc42ea id=472
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:21:41.916327"], ["id", 472]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-04 23:21:41 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=472
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 23:21:41 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-04 22:21:41.973559"], ["updated_at", "2025-12-04 22:21:41.973559"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
Completed 200 OK in 860ms (Views: 33.3ms | ActiveRecord: 7.8ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 23:21:59 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_d7cedede", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d7cedede", "email" => "test_520641d0@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d7cedede"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d7cedede"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:59.729947"], ["updated_at", "2025-12-04 22:21:59.729947"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=473 username=testuser_d7cedede
Completed 201 Created in 51ms (Views: 0.3ms | ActiveRecord: 10.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5a12e0e2"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5a12e0e2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:59.745489"], ["updated_at", "2025-12-04 22:21:59.745489"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:21:59 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_5a12e0e2", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_5a12e0e2", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5a12e0e2"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_5a12e0e2 id=474
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:21:59.753486"], ["id", 474]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0df106be"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0df106be"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:59.762851"], ["updated_at", "2025-12-04 22:21:59.762851"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:21:59 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_0df106be", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0df106be", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0df106be"], ["LIMIT", 1]]
Login failed for username=testuser_0df106be
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_60f51b73"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_60f51b73"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:21:59.780284"], ["updated_at", "2025-12-04 22:21:59.780284"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:21:59 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_60f51b73", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_60f51b73", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_60f51b73"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_60f51b73 id=476
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:21:59.786598"], ["id", 476]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-04 23:21:59 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=476
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 23:21:59 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-04 22:21:59.827890"], ["updated_at", "2025-12-04 22:21:59.827890"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | GC: 0.0ms)
Completed 200 OK in 463ms (Views: 20.7ms | ActiveRecord: 6.9ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-04 23:22:19 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_a9cbd464", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a9cbd464", "email" => "test_e5ead38a@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a9cbd464"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a9cbd464"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:22:19.331108"], ["updated_at", "2025-12-04 22:22:19.331108"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=477 username=testuser_a9cbd464
Completed 201 Created in 55ms (Views: 0.2ms | ActiveRecord: 9.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6642fea0"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6642fea0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:22:19.347593"], ["updated_at", "2025-12-04 22:22:19.347593"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:22:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6642fea0", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6642fea0", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6642fea0"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6642fea0 id=478
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:22:19.355920"], ["id", 478]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 3.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bb270acd"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bb270acd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:22:19.367341"], ["updated_at", "2025-12-04 22:22:19.367341"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:22:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_bb270acd", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_bb270acd", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bb270acd"], ["LIMIT", 1]]
Login failed for username=testuser_bb270acd
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_06eb8deb"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_06eb8deb"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-04 22:22:19.380529"], ["updated_at", "2025-12-04 22:22:19.380529"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-04 23:22:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_06eb8deb", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_06eb8deb", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_06eb8deb"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_06eb8deb id=480
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-04 22:22:19.386499"], ["id", 480]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-04 23:22:19 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=480
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-04 23:22:19 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-04 22:22:19.428919"], ["updated_at", "2025-12-04 22:22:19.428919"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | GC: 0.0ms)
Completed 200 OK in 467ms (Views: 21.6ms | ActiveRecord: 6.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (8.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (47.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 14:11:18 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_69fed3ed", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_69fed3ed", "email" => "test_a71666b3@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (8.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_69fed3ed"], ["LIMIT", 1]]
  [1m[36mUser Create (11.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_69fed3ed"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:11:20.324013"], ["updated_at", "2025-12-05 13:11:20.324013"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=484 username=testuser_69fed3ed
Completed 201 Created in 1261ms (Views: 0.7ms | ActiveRecord: 48.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9642e458"], ["LIMIT", 1]]
  [1m[36mUser Create (4.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9642e458"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:11:20.457764"], ["updated_at", "2025-12-05 13:11:20.457764"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 14:11:20 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9642e458", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9642e458", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9642e458"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9642e458 id=485
  [1m[36mUser Update (3.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 13:11:20.488685"], ["id", 485]]
Completed 200 OK in 20ms (Views: 0.4ms | ActiveRecord: 10.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6881e743"], ["LIMIT", 1]]
  [1m[36mUser Create (2.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6881e743"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:11:20.519418"], ["updated_at", "2025-12-05 13:11:20.519418"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 14:11:20 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6881e743", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6881e743", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6881e743"], ["LIMIT", 1]]
Login failed for username=testuser_6881e743
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6e7d235b"], ["LIMIT", 1]]
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6e7d235b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:11:20.558622"], ["updated_at", "2025-12-05 13:11:20.558622"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 14:11:20 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6e7d235b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6e7d235b", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6e7d235b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6e7d235b id=487
  [1m[36mUser Update (4.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 13:11:20.576367"], ["id", 487]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 6.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 14:11:20 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=487
Completed 200 OK in 142ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 14:11:21 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (12.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 13:11:21.171249"], ["updated_at", "2025-12-05 13:11:21.171249"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 50.0ms | GC: 0.0ms)
Completed 200 OK in 1289ms (Views: 194.7ms | ActiveRecord: 24.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 14:22:24 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_9335bab8", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9335bab8", "email" => "test_acb1e6be@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9335bab8"], ["LIMIT", 1]]
  [1m[36mUser Create (3.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9335bab8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:22:24.713283"], ["updated_at", "2025-12-05 13:22:24.713283"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=488 username=testuser_9335bab8
Completed 201 Created in 62ms (Views: 0.3ms | ActiveRecord: 20.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6c67b226"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6c67b226"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:22:24.732082"], ["updated_at", "2025-12-05 13:22:24.732082"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 14:22:24 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6c67b226", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6c67b226", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6c67b226"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6c67b226 id=489
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 13:22:24.739585"], ["id", 489]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_368aa697"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_368aa697"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:22:24.749976"], ["updated_at", "2025-12-05 13:22:24.749976"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 14:22:24 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_368aa697", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_368aa697", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_368aa697"], ["LIMIT", 1]]
Login failed for username=testuser_368aa697
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1e8020a2"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1e8020a2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:22:24.765345"], ["updated_at", "2025-12-05 13:22:24.765345"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 14:22:24 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1e8020a2", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1e8020a2", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1e8020a2"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1e8020a2 id=491
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 13:22:24.773853"], ["id", 491]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 14:22:24 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=491
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 14:22:24 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 13:22:24.815373"], ["updated_at", "2025-12-05 13:22:24.815373"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | GC: 0.0ms)
Completed 200 OK in 427ms (Views: 19.7ms | ActiveRecord: 7.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 14:22:30 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 44.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 46.2ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 50.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 14:22:31 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 14:22:31 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 14:22:31 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 13:22:31.898782"], ["updated_at", "2025-12-05 13:22:31.898782"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 9ms (ActiveRecord: 3.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 14:22:31 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 14:22:32 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 14:22:32 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=492
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 13:22:32.418656"], ["id", 492]]
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 14:22:32 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 14:22:32 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 14:22:32 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 15:53:09 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_555dace2", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_555dace2", "email" => "test_4f94ca1b@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_555dace2"], ["LIMIT", 1]]
  [1m[36mUser Create (4.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_555dace2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:53:09.191881"], ["updated_at", "2025-12-05 14:53:09.191881"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=493 username=testuser_555dace2
Completed 201 Created in 114ms (Views: 0.4ms | ActiveRecord: 26.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_64060734"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_64060734"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:53:09.219580"], ["updated_at", "2025-12-05 14:53:09.219580"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:53:09 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_64060734", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_64060734", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_64060734"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_64060734 id=494
  [1m[36mUser Update (2.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:53:09.236754"], ["id", 494]]
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 7.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ffceeaa9"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ffceeaa9"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:53:09.250872"], ["updated_at", "2025-12-05 14:53:09.250872"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:53:09 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ffceeaa9", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ffceeaa9", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ffceeaa9"], ["LIMIT", 1]]
Login failed for username=testuser_ffceeaa9
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a76a07ad"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a76a07ad"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:53:09.270310"], ["updated_at", "2025-12-05 14:53:09.270310"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:53:09 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_a76a07ad", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a76a07ad", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a76a07ad"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_a76a07ad id=496
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:53:09.278259"], ["id", 496]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 15:53:09 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=496
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 15:53:09 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:53:09.331988"], ["updated_at", "2025-12-05 14:53:09.331988"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 35.0ms | GC: 0.0ms)
Completed 200 OK in 189ms (Views: 63.2ms | ActiveRecord: 7.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:53:14 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 8.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 16.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 15:53:14 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 15:53:14 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 15:53:15 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:53:15.119527"], ["updated_at", "2025-12-05 14:53:15.119527"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 11ms (ActiveRecord: 4.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:53:15 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:53:15 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 15:53:15 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=497
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:53:15.736905"], ["id", 497]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 15:53:15 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 8.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 15:53:16 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:53:16 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 15:54:45 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:54:45.856560"], ["updated_at", "2025-12-05 14:54:45.856560"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 50ms (ActiveRecord: 11.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWeatherSearch Count (10.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "weather_searches"[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 15:54:46 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:54:46.210286"], ["updated_at", "2025-12-05 14:54:46.210286"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 15:54:46 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_7f573400", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7f573400", "email" => "test_7a88adb2@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7f573400"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7f573400"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:54:46.242895"], ["updated_at", "2025-12-05 14:54:46.242895"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=498 username=testuser_7f573400
Completed 201 Created in 19ms (Views: 0.3ms | ActiveRecord: 7.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_663a496f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_663a496f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:54:46.257918"], ["updated_at", "2025-12-05 14:54:46.257918"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:54:46 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_663a496f", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_663a496f", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_663a496f"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_663a496f id=499
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:54:46.266544"], ["id", 499]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_52aff4c4"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_52aff4c4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:54:46.277308"], ["updated_at", "2025-12-05 14:54:46.277308"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:54:46 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_52aff4c4", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_52aff4c4", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_52aff4c4"], ["LIMIT", 1]]
Login failed for username=testuser_52aff4c4
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e5956146"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e5956146"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:54:46.295555"], ["updated_at", "2025-12-05 14:54:46.295555"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:54:46 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e5956146", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e5956146", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e5956146"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e5956146 id=501
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:54:46.303262"], ["id", 501]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 15:54:46 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=501
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 15:54:46 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:54:46.341648"], ["updated_at", "2025-12-05 14:54:46.341648"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:54:50 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.5ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 38.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 15:54:50 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 15:54:50 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 15:54:51 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:54:51.442173"], ["updated_at", "2025-12-05 14:54:51.442173"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:54:51 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:54:51 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 15:54:51 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=502
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:54:51.946688"], ["id", 502]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 15:54:51 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 15:54:52 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:54:52 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:56:37.183834"], ["updated_at", "2025-12-05 14:56:37.183834"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 57ms (Views: 0.2ms | ActiveRecord: 11.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWeatherSearch Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "weather_searches"[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:56:37.530112"], ["updated_at", "2025-12-05 14:56:37.530112"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mWeatherSearch Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "weather_searches"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_a042862f", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a042862f", "email" => "test_d96b4ac4@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a042862f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a042862f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:56:37.559586"], ["updated_at", "2025-12-05 14:56:37.559586"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=503 username=testuser_a042862f
Completed 201 Created in 16ms (Views: 0.2ms | ActiveRecord: 6.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ddf9a2b7"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ddf9a2b7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:56:37.572177"], ["updated_at", "2025-12-05 14:56:37.572177"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ddf9a2b7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ddf9a2b7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ddf9a2b7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_ddf9a2b7 id=504
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:56:37.580187"], ["id", 504]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a19c7386"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a19c7386"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:56:37.589481"], ["updated_at", "2025-12-05 14:56:37.589481"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_a19c7386", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a19c7386", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a19c7386"], ["LIMIT", 1]]
Login failed for username=testuser_a19c7386
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_859af4d8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_859af4d8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:56:37.605682"], ["updated_at", "2025-12-05 14:56:37.605682"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_859af4d8", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_859af4d8", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_859af4d8"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_859af4d8 id=506
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:56:37.612697"], ["id", 506]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=506
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 15:56:37 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:56:37.648088"], ["updated_at", "2025-12-05 14:56:37.648088"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:56:41 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 38.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 15:56:42 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 15:56:42 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 15:56:42 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:56:42.855546"], ["updated_at", "2025-12-05 14:56:42.855546"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 12ms (ActiveRecord: 5.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:56:42 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:56:42 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 15:56:43 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=507
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:56:43.372036"], ["id", 507]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 15:56:43 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 15:56:43 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:56:43 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weathers" for 127.0.0.1 at 2025-12-05 15:57:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/weathers"):
  
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 15:57:52 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_41e1aa1e", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_41e1aa1e", "email" => "test_2458c17e@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_41e1aa1e"], ["LIMIT", 1]]
  [1m[36mUser Create (3.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_41e1aa1e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:57:52.086088"], ["updated_at", "2025-12-05 14:57:52.086088"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=508 username=testuser_41e1aa1e
Completed 201 Created in 70ms (Views: 0.4ms | ActiveRecord: 15.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_869e72f7"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_869e72f7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:57:52.111729"], ["updated_at", "2025-12-05 14:57:52.111729"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:57:52 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_869e72f7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_869e72f7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_869e72f7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_869e72f7 id=509
  [1m[36mUser Update (1.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:57:52.125768"], ["id", 509]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 6.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_97e2f093"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_97e2f093"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:57:52.137949"], ["updated_at", "2025-12-05 14:57:52.137949"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:57:52 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_97e2f093", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_97e2f093", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_97e2f093"], ["LIMIT", 1]]
Login failed for username=testuser_97e2f093
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8e0cbc5e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8e0cbc5e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:57:52.157668"], ["updated_at", "2025-12-05 14:57:52.157668"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 15:57:52 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_8e0cbc5e", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_8e0cbc5e", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8e0cbc5e"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_8e0cbc5e id=511
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:57:52.167343"], ["id", 511]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 15:57:52 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=511
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 15:57:52 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 14:57:52.212690"], ["updated_at", "2025-12-05 14:57:52.212690"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 39ms (ActiveRecord: 5.7ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:57:56 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 23.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 15:57:56 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 15:57:56 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 15:57:57 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 14:57:57.222459"], ["updated_at", "2025-12-05 14:57:57.222459"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 9ms (ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 15:57:57 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:57:57 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 15:57:57 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=512
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 14:57:57.707222"], ["id", 512]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 15:57:57 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 15:57:57 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 15:57:57 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:00:34.333481"], ["updated_at", "2025-12-05 15:00:34.333481"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 75ms (Views: 0.3ms | ActiveRecord: 14.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:00:34.738490"], ["updated_at", "2025-12-05 15:00:34.738490"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWeatherSearch Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "weather_searches"[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:00:34.768645"], ["updated_at", "2025-12-05 15:00:34.768645"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 2.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mWeatherSearch Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "weather_searches"[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:00:34.782382"], ["updated_at", "2025-12-05 15:00:34.782382"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5ms (Views: 0.1ms | ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_27c206bc", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_27c206bc", "email" => "test_7ba8c6be@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_27c206bc"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_27c206bc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:00:34.813480"], ["updated_at", "2025-12-05 15:00:34.813480"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=513 username=testuser_27c206bc
Completed 201 Created in 19ms (Views: 0.2ms | ActiveRecord: 7.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6a020f76"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6a020f76"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:00:34.827926"], ["updated_at", "2025-12-05 15:00:34.827926"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6a020f76", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6a020f76", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6a020f76"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6a020f76 id=514
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:00:34.838362"], ["id", 514]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4059a0bc"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4059a0bc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:00:34.856011"], ["updated_at", "2025-12-05 15:00:34.856011"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_4059a0bc", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4059a0bc", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4059a0bc"], ["LIMIT", 1]]
Login failed for username=testuser_4059a0bc
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7f48e925"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7f48e925"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:00:34.869784"], ["updated_at", "2025-12-05 15:00:34.869784"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_7f48e925", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7f48e925", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7f48e925"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_7f48e925 id=516
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:00:34.875617"], ["id", 516]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=516
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:00:34 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:00:34.913894"], ["updated_at", "2025-12-05 15:00:34.913894"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 3.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:00:39 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.8ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 32.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:00:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:00:39 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:00:39 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:00:39.919809"], ["updated_at", "2025-12-05 15:00:39.919809"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 3.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:00:39 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:00:40 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:00:40 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=517
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:00:40.463856"], ["id", 517]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:00:40 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:00:40 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:00:40 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_8f8c1083", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_8f8c1083", "email" => "test_bc660e70@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8f8c1083"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8f8c1083"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:01:35.427205"], ["updated_at", "2025-12-05 15:01:35.427205"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=518 username=testuser_8f8c1083
Completed 201 Created in 55ms (Views: 0.2ms | ActiveRecord: 12.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_73785912"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_73785912"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:01:35.441977"], ["updated_at", "2025-12-05 15:01:35.441977"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_73785912", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_73785912", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_73785912"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_73785912 id=519
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:01:35.450153"], ["id", 519]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ffdd845f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ffdd845f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:01:35.461826"], ["updated_at", "2025-12-05 15:01:35.461826"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ffdd845f", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ffdd845f", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ffdd845f"], ["LIMIT", 1]]
Login failed for username=testuser_ffdd845f
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_951f30de"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_951f30de"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:01:35.474565"], ["updated_at", "2025-12-05 15:01:35.474565"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_951f30de", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_951f30de", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_951f30de"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_951f30de id=521
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:01:35.481155"], ["id", 521]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=521
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:01:35.509641"], ["updated_at", "2025-12-05 15:01:35.509641"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | GC: 0.0ms)
Completed 200 OK in 344ms (Views: 21.2ms | ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:01:35.858440"], ["updated_at", "2025-12-05 15:01:35.858440"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 1.8ms | ActiveRecord: 2.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:01:35 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:01:35.886093"], ["updated_at", "2025-12-05 15:01:35.886093"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:01:40 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 13.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:01:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:01:40 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:01:40 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:01:40.963499"], ["updated_at", "2025-12-05 15:01:40.963499"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:01:40 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:01:41 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:01:41 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=522
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:01:41.574087"], ["id", 522]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:01:41 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:01:41 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:01:41 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_40feabe4", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_40feabe4", "email" => "test_58fe6851@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_40feabe4"], ["LIMIT", 1]]
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_40feabe4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:08:46.214607"], ["updated_at", "2025-12-05 15:08:46.214607"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=523 username=testuser_40feabe4
Completed 201 Created in 59ms (Views: 0.3ms | ActiveRecord: 16.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e0cbcc0a"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e0cbcc0a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:08:46.235111"], ["updated_at", "2025-12-05 15:08:46.235111"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e0cbcc0a", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e0cbcc0a", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e0cbcc0a"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e0cbcc0a id=524
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:08:46.242705"], ["id", 524]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7cca1508"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7cca1508"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:08:46.254722"], ["updated_at", "2025-12-05 15:08:46.254722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_7cca1508", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7cca1508", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7cca1508"], ["LIMIT", 1]]
Login failed for username=testuser_7cca1508
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_76581d75"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_76581d75"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:08:46.270243"], ["updated_at", "2025-12-05 15:08:46.270243"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_76581d75", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_76581d75", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_76581d75"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_76581d75 id=526
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:08:46.277671"], ["id", 526]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=526
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:08:46.320611"], ["updated_at", "2025-12-05 15:08:46.320611"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 38ms (ActiveRecord: 6.8ms (1 query, 0 cached) | GC: 0.2ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:08:46.916547"], ["updated_at", "2025-12-05 15:08:46.916547"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:08:46 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 500 Internal Server Error in 144ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:08:47 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:08:47.085355"], ["updated_at", "2025-12-05 15:08:47.085355"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:08:51 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 38.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:08:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:08:51 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:08:52 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:08:52.227639"], ["updated_at", "2025-12-05 15:08:52.227639"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:08:52 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:08:52 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:08:52 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=527
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:08:52.788481"], ["id", 527]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:08:52 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:08:52 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:08:53 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:11:36 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_550e9275", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_550e9275", "email" => "test_ecb18c9e@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_550e9275"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_550e9275"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:11:36.443461"], ["updated_at", "2025-12-05 15:11:36.443461"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=528 username=testuser_550e9275
Completed 201 Created in 57ms (Views: 0.3ms | ActiveRecord: 14.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_57b2fc2f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_57b2fc2f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:11:36.461350"], ["updated_at", "2025-12-05 15:11:36.461350"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:11:36 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_57b2fc2f", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_57b2fc2f", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_57b2fc2f"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_57b2fc2f id=529
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:11:36.471409"], ["id", 529]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_201e389b"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_201e389b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:11:36.489106"], ["updated_at", "2025-12-05 15:11:36.489106"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:11:36 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_201e389b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_201e389b", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_201e389b"], ["LIMIT", 1]]
Login failed for username=testuser_201e389b
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_54a0403c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_54a0403c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:11:36.504813"], ["updated_at", "2025-12-05 15:11:36.504813"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:11:36 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_54a0403c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_54a0403c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_54a0403c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_54a0403c id=531
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:11:36.512906"], ["id", 531]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:11:36 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=531
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:11:36 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:11:36.594779"], ["updated_at", "2025-12-05 15:11:36.594779"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | GC: 0.0ms)
Completed 200 OK in 515ms (Views: 24.0ms | ActiveRecord: 6.3ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:11:37 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:11:37.118889"], ["updated_at", "2025-12-05 15:11:37.118889"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 95ms (Views: 3.4ms | ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:11:37 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:11:37 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:11:37.256608"], ["updated_at", "2025-12-05 15:11:37.256608"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 96ms (Views: 3.9ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:11:41 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 5.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.5ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 12.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:11:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:11:41 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:11:42 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:11:42.417987"], ["updated_at", "2025-12-05 15:11:42.417987"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 3.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:11:42 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:11:42 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:11:42 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=532
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:11:42.938407"], ["id", 532]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:11:42 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:11:43 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:11:43 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:12:48 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_796cc688", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_796cc688", "email" => "test_96a6c277@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_796cc688"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_796cc688"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:12:49.099422"], ["updated_at", "2025-12-05 15:12:49.099422"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=533 username=testuser_796cc688
Completed 201 Created in 57ms (Views: 0.3ms | ActiveRecord: 11.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fb26b137"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_fb26b137"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:12:49.115190"], ["updated_at", "2025-12-05 15:12:49.115190"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_fb26b137", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_fb26b137", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fb26b137"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_fb26b137 id=534
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:12:49.124451"], ["id", 534]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_60df8719"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_60df8719"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:12:49.138201"], ["updated_at", "2025-12-05 15:12:49.138201"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_60df8719", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_60df8719", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_60df8719"], ["LIMIT", 1]]
Login failed for username=testuser_60df8719
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_260f99d7"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_260f99d7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:12:49.152928"], ["updated_at", "2025-12-05 15:12:49.152928"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_260f99d7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_260f99d7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_260f99d7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_260f99d7 id=536
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:12:49.159699"], ["id", 536]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=536
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:12:49.201157"], ["updated_at", "2025-12-05 15:12:49.201157"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | GC: 0.0ms)
Completed 200 OK in 430ms (Views: 25.3ms | ActiveRecord: 5.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:12:49.639688"], ["updated_at", "2025-12-05 15:12:49.639688"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 90ms (Views: 3.3ms | ActiveRecord: 2.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:12:49 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:12:49.767802"], ["updated_at", "2025-12-05 15:12:49.767802"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 100ms (Views: 2.0ms | ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:12:54 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 12.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:12:54 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:12:54 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:12:54 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:12:54.899752"], ["updated_at", "2025-12-05 15:12:54.899752"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 11ms (ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:12:54 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:12:55 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:12:55 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=537
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:12:55.398461"], ["id", 537]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:12:55 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:12:55 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:12:55 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:15:22 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_44c7f8a4", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_44c7f8a4", "email" => "test_fcee6b41@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_44c7f8a4"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_44c7f8a4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:22.585925"], ["updated_at", "2025-12-05 15:15:22.585925"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=538 username=testuser_44c7f8a4
Completed 201 Created in 61ms (Views: 0.3ms | ActiveRecord: 18.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4cb4d756"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4cb4d756"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:22.606110"], ["updated_at", "2025-12-05 15:15:22.606110"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:15:22 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_4cb4d756", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4cb4d756", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4cb4d756"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_4cb4d756 id=539
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:15:22.615955"], ["id", 539]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8ab6dbc"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d8ab6dbc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:22.627917"], ["updated_at", "2025-12-05 15:15:22.627917"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:15:22 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_d8ab6dbc", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d8ab6dbc", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8ab6dbc"], ["LIMIT", 1]]
Login failed for username=testuser_d8ab6dbc
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_57c2f3cf"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_57c2f3cf"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:22.641048"], ["updated_at", "2025-12-05 15:15:22.641048"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:15:22 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_57c2f3cf", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_57c2f3cf", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_57c2f3cf"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_57c2f3cf id=541
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:15:22.648311"], ["id", 541]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:15:22 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=541
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:15:22 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:15:22.690378"], ["updated_at", "2025-12-05 15:15:22.690378"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | GC: 0.0ms)
Completed 200 OK in 457ms (Views: 19.5ms | ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:15:23 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:15:23.160099"], ["updated_at", "2025-12-05 15:15:23.160099"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 88ms (Views: 3.1ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:15:23 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:15:23 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:15:23.286827"], ["updated_at", "2025-12-05 15:15:23.286827"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 86ms (Views: 3.5ms | ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:15:27 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 7.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 13.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:15:27 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:15:27 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:15:28 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:28.649647"], ["updated_at", "2025-12-05 15:15:28.649647"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 12ms (ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:15:28 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:15:28 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:15:29 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=542
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:15:29.192578"], ["id", 542]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:15:29 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 9.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:15:29 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:15:29 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:15:39 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_072036bc", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_072036bc", "email" => "test_8ff00098@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_072036bc"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_072036bc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:39.955707"], ["updated_at", "2025-12-05 15:15:39.955707"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=543 username=testuser_072036bc
Completed 201 Created in 52ms (Views: 0.2ms | ActiveRecord: 13.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_394c8503"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_394c8503"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:39.975035"], ["updated_at", "2025-12-05 15:15:39.975035"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:15:39 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_394c8503", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_394c8503", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_394c8503"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_394c8503 id=544
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:15:39.983873"], ["id", 544]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c2a1f778"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c2a1f778"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:39.998268"], ["updated_at", "2025-12-05 15:15:39.998268"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:15:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_c2a1f778", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c2a1f778", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c2a1f778"], ["LIMIT", 1]]
Login failed for username=testuser_c2a1f778
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7295f636"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7295f636"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:40.014182"], ["updated_at", "2025-12-05 15:15:40.014182"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:15:40 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_7295f636", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7295f636", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7295f636"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_7295f636 id=546
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:15:40.020956"], ["id", 546]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:15:40 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=546
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:15:40 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:15:40.065820"], ["updated_at", "2025-12-05 15:15:40.065820"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | GC: 0.0ms)
Completed 200 OK in 467ms (Views: 22.2ms | ActiveRecord: 6.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:15:40 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:15:40.538833"], ["updated_at", "2025-12-05 15:15:40.538833"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 85ms (Views: 3.8ms | ActiveRecord: 2.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:15:40 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:15:40 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:15:40.658841"], ["updated_at", "2025-12-05 15:15:40.658841"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 88ms (Views: 3.2ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:15:44 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 7.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 13.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:15:45 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:15:45 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:15:45 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:15:45.738683"], ["updated_at", "2025-12-05 15:15:45.738683"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:15:45 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:15:45 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:15:46 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=547
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:15:46.236526"], ["id", 547]]
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:15:46 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:15:46 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:15:46 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:16:34 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_3eae0096", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3eae0096", "email" => "test_6d4a8391@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3eae0096"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3eae0096"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:16:34.530794"], ["updated_at", "2025-12-05 15:16:34.530794"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=548 username=testuser_3eae0096
Completed 201 Created in 54ms (Views: 0.3ms | ActiveRecord: 9.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a8ce038a"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a8ce038a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:16:34.548223"], ["updated_at", "2025-12-05 15:16:34.548223"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:16:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_a8ce038a", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a8ce038a", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a8ce038a"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_a8ce038a id=549
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:16:34.557294"], ["id", 549]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_67c1dc75"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_67c1dc75"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:16:34.568727"], ["updated_at", "2025-12-05 15:16:34.568727"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:16:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_67c1dc75", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_67c1dc75", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_67c1dc75"], ["LIMIT", 1]]
Login failed for username=testuser_67c1dc75
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d9e3cd44"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d9e3cd44"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:16:34.585317"], ["updated_at", "2025-12-05 15:16:34.585317"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:16:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_d9e3cd44", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d9e3cd44", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d9e3cd44"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d9e3cd44 id=551
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:16:34.593364"], ["id", 551]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:16:34 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=551
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:16:34 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:16:34.642089"], ["updated_at", "2025-12-05 15:16:34.642089"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | GC: 0.0ms)
Completed 200 OK in 480ms (Views: 25.0ms | ActiveRecord: 6.3ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:16:35 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:16:35.131908"], ["updated_at", "2025-12-05 15:16:35.131908"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 91ms (Views: 2.7ms | ActiveRecord: 2.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:16:35 +0100
Processing by WeatherController#index as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:16:35 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:16:35.255182"], ["updated_at", "2025-12-05 15:16:35.255182"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 1090ms (Views: 3.2ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:17:20 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_dafbe9dc", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_dafbe9dc", "email" => "test_d81f2ce2@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_dafbe9dc"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_dafbe9dc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:21.000780"], ["updated_at", "2025-12-05 15:17:21.000780"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=552 username=testuser_dafbe9dc
Completed 201 Created in 57ms (Views: 0.3ms | ActiveRecord: 10.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_233574cb"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_233574cb"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:21.020020"], ["updated_at", "2025-12-05 15:17:21.020020"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:17:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_233574cb", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_233574cb", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_233574cb"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_233574cb id=553
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:17:21.034112"], ["id", 553]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 4.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ea53e2a5"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ea53e2a5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:21.047568"], ["updated_at", "2025-12-05 15:17:21.047568"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:17:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ea53e2a5", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ea53e2a5", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ea53e2a5"], ["LIMIT", 1]]
Login failed for username=testuser_ea53e2a5
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0a39e35f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0a39e35f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:21.069224"], ["updated_at", "2025-12-05 15:17:21.069224"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:17:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_0a39e35f", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0a39e35f", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0a39e35f"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_0a39e35f id=555
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:17:21.079731"], ["id", 555]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:17:21 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=555
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/weather" for 127.0.0.1 at 2025-12-05 16:17:21 +0100
Processing by WeatherController#index as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:17:21.132614"], ["updated_at", "2025-12-05 15:17:21.132614"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering weather/index.html.erb within layouts/application
  Rendered weather/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | GC: 0.0ms)
Completed 200 OK in 481ms (Views: 25.3ms | ActiveRecord: 8.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:17:39 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_94186226", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_94186226", "email" => "test_c04c0233@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_94186226"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_94186226"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:39.821374"], ["updated_at", "2025-12-05 15:17:39.821374"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=556 username=testuser_94186226
Completed 201 Created in 51ms (Views: 0.3ms | ActiveRecord: 8.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_50d9558e"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_50d9558e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:39.836679"], ["updated_at", "2025-12-05 15:17:39.836679"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:17:39 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_50d9558e", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_50d9558e", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_50d9558e"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_50d9558e id=557
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:17:39.845603"], ["id", 557]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_31cf4c0c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_31cf4c0c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:39.857619"], ["updated_at", "2025-12-05 15:17:39.857619"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:17:39 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_31cf4c0c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_31cf4c0c", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_31cf4c0c"], ["LIMIT", 1]]
Login failed for username=testuser_31cf4c0c
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bd18a119"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bd18a119"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:17:39.874183"], ["updated_at", "2025-12-05 15:17:39.874183"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:17:39 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_bd18a119", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_bd18a119", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bd18a119"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_bd18a119 id=559
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:17:39.883016"], ["id", 559]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:17:39 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=559
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:17:39 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:17:40.033056"], ["updated_at", "2025-12-05 15:17:40.033056"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 116ms (Views: 0.3ms | ActiveRecord: 8.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:17:40 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:17:40.612266"], ["updated_at", "2025-12-05 15:17:40.612266"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 265ms (Views: 0.2ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:17:40 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 400 Bad Request in 87ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:17:40 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:17:40.811763"], ["updated_at", "2025-12-05 15:17:40.811763"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 85ms (Views: 0.2ms | ActiveRecord: 3.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:19:24 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_2416b763", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_2416b763", "email" => "test_9999a6a4@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2416b763"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2416b763"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:19:25.064515"], ["updated_at", "2025-12-05 15:19:25.064515"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=560 username=testuser_2416b763
Completed 201 Created in 57ms (Views: 0.3ms | ActiveRecord: 11.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_60bd71c5"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_60bd71c5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:19:25.083846"], ["updated_at", "2025-12-05 15:19:25.083846"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_60bd71c5", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_60bd71c5", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_60bd71c5"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_60bd71c5 id=561
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:19:25.095758"], ["id", 561]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 5.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a9c51c96"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a9c51c96"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:19:25.107601"], ["updated_at", "2025-12-05 15:19:25.107601"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_a9c51c96", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a9c51c96", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a9c51c96"], ["LIMIT", 1]]
Login failed for username=testuser_a9c51c96
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_07c9d8fc"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_07c9d8fc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:19:25.124257"], ["updated_at", "2025-12-05 15:19:25.124257"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_07c9d8fc", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_07c9d8fc", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_07c9d8fc"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_07c9d8fc id=563
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:19:25.130877"], ["id", 563]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=563
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:19:25.172523"], ["updated_at", "2025-12-05 15:19:25.172523"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 5.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:19:25.601080"], ["updated_at", "2025-12-05 15:19:25.601080"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 119ms (Views: 0.2ms | ActiveRecord: 5.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 400 Bad Request in 88ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:19:25 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:19:25.803718"], ["updated_at", "2025-12-05 15:19:25.803718"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 84ms (Views: 0.2ms | ActiveRecord: 6.3ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:21:11 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_6852b8a5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6852b8a5", "email" => "test_8beb0c8f@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6852b8a5"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6852b8a5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:21:11.821114"], ["updated_at", "2025-12-05 15:21:11.821114"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=564 username=testuser_6852b8a5
Completed 201 Created in 58ms (Views: 0.3ms | ActiveRecord: 17.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e4208ca0"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e4208ca0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:21:11.840262"], ["updated_at", "2025-12-05 15:21:11.840262"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:21:11 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e4208ca0", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e4208ca0", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e4208ca0"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e4208ca0 id=565
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:21:11.851324"], ["id", 565]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4ff34f3c"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4ff34f3c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:21:11.862493"], ["updated_at", "2025-12-05 15:21:11.862493"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:21:11 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_4ff34f3c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4ff34f3c", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4ff34f3c"], ["LIMIT", 1]]
Login failed for username=testuser_4ff34f3c
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1d914e75"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1d914e75"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:21:11.876740"], ["updated_at", "2025-12-05 15:21:11.876740"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:21:11 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1d914e75", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1d914e75", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1d914e75"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1d914e75 id=567
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:21:11.884460"], ["id", 567]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:21:11 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=567
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:21:11 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:21:11.930554"], ["updated_at", "2025-12-05 15:21:11.930554"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 6.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:21:12 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:21:12.267250"], ["updated_at", "2025-12-05 15:21:12.267250"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:21:12 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:21:12 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:21:12.296548"], ["updated_at", "2025-12-05 15:21:12.296548"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:23:26 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_5c9e52a3", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_5c9e52a3", "email" => "test_282ab3fd@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5c9e52a3"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5c9e52a3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:23:26.612288"], ["updated_at", "2025-12-05 15:23:26.612288"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=568 username=testuser_5c9e52a3
Completed 201 Created in 52ms (Views: 0.4ms | ActiveRecord: 8.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_82812fcd"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_82812fcd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:23:26.629362"], ["updated_at", "2025-12-05 15:23:26.629362"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:23:26 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_82812fcd", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_82812fcd", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_82812fcd"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_82812fcd id=569
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:23:26.638406"], ["id", 569]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 3.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_39284c3b"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_39284c3b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:23:26.650712"], ["updated_at", "2025-12-05 15:23:26.650712"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:23:26 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_39284c3b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_39284c3b", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_39284c3b"], ["LIMIT", 1]]
Login failed for username=testuser_39284c3b
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_afb7787e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_afb7787e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:23:26.664954"], ["updated_at", "2025-12-05 15:23:26.664954"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:23:26 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_afb7787e", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_afb7787e", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_afb7787e"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_afb7787e id=571
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:23:26.672274"], ["id", 571]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:23:26 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=571
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:23:26 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:23:26.721008"], ["updated_at", "2025-12-05 15:23:26.721008"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 8.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:23:27 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:23:27.045843"], ["updated_at", "2025-12-05 15:23:27.045843"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:23:27 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:23:27 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:23:27.071722"], ["updated_at", "2025-12-05 15:23:27.071722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 2.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:23:31 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 31.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:23:31 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:23:31 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:23:32 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:23:32.143326"], ["updated_at", "2025-12-05 15:23:32.143326"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 4.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:23:32 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:23:32 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:23:32 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=572
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:23:32.704457"], ["id", 572]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:23:32 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:23:32 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:23:32 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 16:32:41 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_461c7955", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_461c7955", "email" => "test_07d5229c@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_461c7955"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_461c7955"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:32:41.886116"], ["updated_at", "2025-12-05 15:32:41.886116"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=573 username=testuser_461c7955
Completed 201 Created in 56ms (Views: 0.2ms | ActiveRecord: 16.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1b73f6be"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1b73f6be"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:32:41.902020"], ["updated_at", "2025-12-05 15:32:41.902020"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:32:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1b73f6be", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1b73f6be", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1b73f6be"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1b73f6be id=574
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:32:41.913527"], ["id", 574]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9342f635"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9342f635"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:32:41.924382"], ["updated_at", "2025-12-05 15:32:41.924382"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:32:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9342f635", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9342f635", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9342f635"], ["LIMIT", 1]]
Login failed for username=testuser_9342f635
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_827fcf34"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_827fcf34"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:32:41.937754"], ["updated_at", "2025-12-05 15:32:41.937754"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 16:32:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_827fcf34", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_827fcf34", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_827fcf34"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_827fcf34 id=576
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:32:41.945452"], ["id", 576]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 16:32:41 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=576
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:32:41 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:32:41.990506"], ["updated_at", "2025-12-05 15:32:41.990506"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 6.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:32:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:32:42.294256"], ["updated_at", "2025-12-05 15:32:42.294256"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:32:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 16:32:42 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 15:32:42.319606"], ["updated_at", "2025-12-05 15:32:42.319606"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 2.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 16:32:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:32:46 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 33.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 16:32:46 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 16:32:46 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 16:32:47 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 15:32:47.462934"], ["updated_at", "2025-12-05 15:32:47.462934"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 9ms (ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 16:32:47 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:32:47 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 16:32:47 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=577
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 15:32:47.953732"], ["id", 577]]
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 1.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 16:32:47 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 16:32:48 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 16:32:48 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 17:50:06 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_82d4b254", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_82d4b254", "email" => "test_1eb40cfc@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_82d4b254"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_82d4b254"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 16:50:06.825806"], ["updated_at", "2025-12-05 16:50:06.825806"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=578 username=testuser_82d4b254
Completed 201 Created in 81ms (Views: 0.3ms | ActiveRecord: 18.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9d69e67e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9d69e67e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 16:50:06.846490"], ["updated_at", "2025-12-05 16:50:06.846490"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 17:50:06 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9d69e67e", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9d69e67e", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9d69e67e"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9d69e67e id=579
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 16:50:06.858091"], ["id", 579]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_962aff0b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_962aff0b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 16:50:06.872295"], ["updated_at", "2025-12-05 16:50:06.872295"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 17:50:06 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_962aff0b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_962aff0b", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_962aff0b"], ["LIMIT", 1]]
Login failed for username=testuser_962aff0b
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4f1edd22"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4f1edd22"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 16:50:06.893275"], ["updated_at", "2025-12-05 16:50:06.893275"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 17:50:06 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_4f1edd22", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4f1edd22", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4f1edd22"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_4f1edd22 id=581
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 16:50:06.901795"], ["id", 581]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 17:50:06 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=581
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 17:50:06 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 16:50:06.962546"], ["updated_at", "2025-12-05 16:50:06.962546"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 7.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 17:50:07 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 16:50:07.345505"], ["updated_at", "2025-12-05 16:50:07.345505"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.3ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 17:50:07 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 17:50:07 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 16:50:07.378990"], ["updated_at", "2025-12-05 16:50:07.378990"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 17:50:07 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 17:50:12 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 6.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 26.9ms | GC: 0.0ms)
Completed 200 OK in 52ms (Views: 50.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 17:50:12 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 17:50:12 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 17:50:13 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 16:50:13.486966"], ["updated_at", "2025-12-05 16:50:13.486966"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 15ms (ActiveRecord: 7.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 17:50:13 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 17:50:13 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 17:50:14 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=582
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 16:50:14.150730"], ["id", 582]]
Redirected to http://localhost:3000/
Completed 302 Found in 14ms (ActiveRecord: 3.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 17:50:14 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 10.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 17:50:14 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 17:50:14 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 18:53:26 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_23d0b806", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_23d0b806", "email" => "test_98245181@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (10.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_23d0b806"], ["LIMIT", 1]]
  [1m[36mUser Create (8.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_23d0b806"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 17:53:27.490031"], ["updated_at", "2025-12-05 17:53:27.490031"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=583 username=testuser_23d0b806
Completed 201 Created in 283ms (Views: 1.1ms | ActiveRecord: 42.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 18:53:27 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_9f169fc5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9f169fc5", "email" => "test_f19573fe@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f169fc5"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 1660ms (Views: 0.3ms | ActiveRecord: 7.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 18:53:29 +0100
Processing by Test::UsersController#register as HTML
TEST REGISTER called with params: #<ActionController::Parameters {"controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password can't be blank, Username can't be blank
Completed 422 Unprocessable Content in 17ms (Views: 0.5ms | ActiveRecord: 5.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_13162387"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_13162387"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 17:53:29.685100"], ["updated_at", "2025-12-05 17:53:29.685100"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 18:53:29 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_13162387", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_13162387", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_13162387"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_13162387 id=584
  [1m[36mUser Update (2.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 17:53:29.718728"], ["id", 584]]
Completed 200 OK in 23ms (Views: 0.5ms | ActiveRecord: 7.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_78978711"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_78978711"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 17:53:29.754380"], ["updated_at", "2025-12-05 17:53:29.754380"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 18:53:29 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_78978711", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_78978711", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_78978711"], ["LIMIT", 1]]
Login failed for username=testuser_78978711
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0201f431"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0201f431"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 17:53:29.795931"], ["updated_at", "2025-12-05 17:53:29.795931"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 18:53:29 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_0201f431", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0201f431", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0201f431"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_0201f431 id=586
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c7084b11"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c7084b11"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 17:53:29.893939"], ["updated_at", "2025-12-05 17:53:29.893939"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 18:53:29 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_c7084b11", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c7084b11", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c7084b11"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_c7084b11 id=587
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 17:53:29.915872"], ["id", 587]]
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 3.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 18:53:29 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=587
Completed 200 OK in 35ms (Views: 0.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 18:53:30 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (9.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 17:53:30.032816"], ["updated_at", "2025-12-05 17:53:30.032816"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 44ms (Views: 0.5ms | ActiveRecord: 18.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 18:53:30 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 17:53:30.073139"], ["updated_at", "2025-12-05 17:53:30.073139"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 10ms (Views: 0.5ms | ActiveRecord: 4.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 18:53:30 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 18:53:30 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 17:53:30.136244"], ["updated_at", "2025-12-05 17:53:30.136244"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 5.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 18:53:30 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 18:53:36 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 18.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 3.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 78.5ms | GC: 0.0ms)
Completed 200 OK in 142ms (Views: 141.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 18:53:37 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 18:53:37 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 18:53:39 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 17:53:39.567566"], ["updated_at", "2025-12-05 17:53:39.567566"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 30ms (ActiveRecord: 10.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 18:53:39 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 9.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 18:53:39 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 6.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 21.9ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 39.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 18:53:41 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=588
  [1m[36mUser Update (2.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 17:53:41.100597"], ["id", 588]]
Redirected to http://localhost:3000/
Completed 302 Found in 24ms (ActiveRecord: 3.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 18:53:41 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 4.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 3.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | GC: 0.0ms)
Completed 200 OK in 50ms (Views: 38.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 18:53:42 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 8ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 18:53:42 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:01:27 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_3d9b0658", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3d9b0658", "email" => "test_afa354b3@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3d9b0658"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3d9b0658"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:01:27.971830"], ["updated_at", "2025-12-05 18:01:27.971830"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=589 username=testuser_3d9b0658
Completed 201 Created in 90ms (Views: 0.3ms | ActiveRecord: 17.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_6c388c4b", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6c388c4b", "email" => "test_363279f2@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6c388c4b"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 549ms (Views: 0.2ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Test::UsersController#register as HTML
TEST REGISTER called with params: #<ActionController::Parameters {"controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password can't be blank, Username can't be blank
Completed 422 Unprocessable Content in 9ms (Views: 0.2ms | ActiveRecord: 4.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3db398c7"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3db398c7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:01:28.643226"], ["updated_at", "2025-12-05 18:01:28.643226"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_3db398c7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3db398c7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3db398c7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_3db398c7 id=590
  [1m[36mUser Update (1.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:01:28.659537"], ["id", 590]]
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 5.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_91719f54"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_91719f54"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:01:28.678004"], ["updated_at", "2025-12-05 18:01:28.678004"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_91719f54", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_91719f54", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_91719f54"], ["LIMIT", 1]]
Login failed for username=testuser_91719f54
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ebe195dd"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ebe195dd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:01:28.702174"], ["updated_at", "2025-12-05 18:01:28.702174"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ebe195dd", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ebe195dd", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ebe195dd"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_ebe195dd id=592
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e6ab23db"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e6ab23db"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:01:28.734195"], ["updated_at", "2025-12-05 18:01:28.734195"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e6ab23db", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e6ab23db", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e6ab23db"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e6ab23db id=593
  [1m[36mUser Update (2.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:01:28.752939"], ["id", 593]]
Completed 200 OK in 12ms (Views: 0.5ms | ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=593
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:01:28.834379"], ["updated_at", "2025-12-05 18:01:28.834379"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.4ms | ActiveRecord: 12.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:01:28.868104"], ["updated_at", "2025-12-05 18:01:28.868104"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 11ms (Views: 0.3ms | ActiveRecord: 6.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:01:28.916595"], ["updated_at", "2025-12-05 18:01:28.916595"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:01:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 19:01:34 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 13.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 53.1ms | GC: 0.0ms)
Completed 200 OK in 114ms (Views: 112.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 19:01:34 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 19:01:35 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 19:01:35 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:01:35.948212"], ["updated_at", "2025-12-05 18:01:35.948212"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 18ms (ActiveRecord: 6.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 19:01:35 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 19:01:36 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 11.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 19:01:36 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=594
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:01:36.809916"], ["id", 594]]
Redirected to http://localhost:3000/
Completed 302 Found in 12ms (ActiveRecord: 2.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 19:01:36 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 10.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 19:01:37 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 19:01:37 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_e68337ea", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e68337ea", "email" => "test_bc942b90@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e68337ea"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e68337ea"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:02:41.165326"], ["updated_at", "2025-12-05 18:02:41.165326"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=595 username=testuser_e68337ea
Completed 201 Created in 60ms (Views: 0.3ms | ActiveRecord: 13.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_89f763b6", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_89f763b6", "email" => "test_8249e089@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_89f763b6"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 433ms (Views: 0.3ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_1ab05073", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1ab05073", "email" => "test_d8ffcb40@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1ab05073"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1ab05073"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:02:41.667896"], ["updated_at", "2025-12-05 18:02:41.667896"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=596 username=testuser_1ab05073
Completed 201 Created in 10ms (Views: 0.2ms | ActiveRecord: 5.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bc14ab19"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bc14ab19"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:02:41.684551"], ["updated_at", "2025-12-05 18:02:41.684551"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_bc14ab19", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_bc14ab19", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bc14ab19"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_bc14ab19 id=597
  [1m[36mUser Update (1.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:02:41.697995"], ["id", 597]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 6.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_41f2a620"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_41f2a620"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:02:41.713706"], ["updated_at", "2025-12-05 18:02:41.713706"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_41f2a620", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_41f2a620", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_41f2a620"], ["LIMIT", 1]]
Login failed for username=testuser_41f2a620
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2f86bfb4"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2f86bfb4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:02:41.736179"], ["updated_at", "2025-12-05 18:02:41.736179"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_2f86bfb4", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_2f86bfb4", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2f86bfb4"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_2f86bfb4 id=599
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7a26f531"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7a26f531"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:02:41.767379"], ["updated_at", "2025-12-05 18:02:41.767379"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_7a26f531", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7a26f531", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7a26f531"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_7a26f531 id=600
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:02:41.776760"], ["id", 600]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=600
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:02:41.821023"], ["updated_at", "2025-12-05 18:02:41.821023"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 8.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:02:41.838405"], ["updated_at", "2025-12-05 18:02:41.838405"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 4.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:02:41.874130"], ["updated_at", "2025-12-05 18:02:41.874130"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:02:41 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 19:02:46 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 34.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 19:02:46 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 19:02:46 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 19:02:47 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:02:47.183370"], ["updated_at", "2025-12-05 18:02:47.183370"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 23ms (ActiveRecord: 9.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 19:02:47 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 19:02:47 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 19:02:47 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=601
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:02:47.778981"], ["id", 601]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 19:02:47 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 19:02:47 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 19:02:47 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:04:26 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_da8f6ccf", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_da8f6ccf", "email" => "test_e287a383@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_da8f6ccf"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_da8f6ccf"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:26.854679"], ["updated_at", "2025-12-05 18:04:26.854679"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=602 username=testuser_da8f6ccf
Completed 201 Created in 66ms (Views: 0.3ms | ActiveRecord: 11.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_aea3620a", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_aea3620a"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_aea3620a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:26.893640"], ["updated_at", "2025-12-05 18:04:26.893640"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.2ms | ActiveRecord: 7.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:04:26 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_bc852c51", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_bc852c51", "email" => "test_900b4dc3@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bc852c51"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 379ms (Views: 0.3ms | ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_7086ebed", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7086ebed", "email" => "test_99e8cee3@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7086ebed"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7086ebed"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:27.313440"], ["updated_at", "2025-12-05 18:04:27.313440"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=604 username=testuser_7086ebed
Completed 201 Created in 11ms (Views: 0.2ms | ActiveRecord: 6.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_903bd5f7"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_903bd5f7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:27.332346"], ["updated_at", "2025-12-05 18:04:27.332346"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_903bd5f7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_903bd5f7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_903bd5f7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_903bd5f7 id=605
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:04:27.346365"], ["id", 605]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 5.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b0b6e6cb"], ["LIMIT", 1]]
  [1m[36mUser Create (2.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_b0b6e6cb"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:27.362078"], ["updated_at", "2025-12-05 18:04:27.362078"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_b0b6e6cb", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_b0b6e6cb", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b0b6e6cb"], ["LIMIT", 1]]
Login failed for username=testuser_b0b6e6cb
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_eb6328a6"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_eb6328a6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:27.385013"], ["updated_at", "2025-12-05 18:04:27.385013"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_eb6328a6", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_eb6328a6", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_eb6328a6"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_eb6328a6 id=607
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_425c58d8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_425c58d8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:27.411511"], ["updated_at", "2025-12-05 18:04:27.411511"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_425c58d8", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_425c58d8", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_425c58d8"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_425c58d8 id=608
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:04:27.420667"], ["id", 608]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=608
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:04:27.463989"], ["updated_at", "2025-12-05 18:04:27.463989"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 8.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:04:27.481561"], ["updated_at", "2025-12-05 18:04:27.481561"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 4.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 18:04:27.510894"], ["updated_at", "2025-12-05 18:04:27.510894"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 19:04:27 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 19:04:32 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 41.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 19:04:32 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 19:04:32 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 19:04:33 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 18:04:33.037046"], ["updated_at", "2025-12-05 18:04:33.037046"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 15ms (ActiveRecord: 6.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 19:04:33 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 19:04:33 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 19:04:33 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=609
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 18:04:33.654058"], ["id", 609]]
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 19:04:33 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 7.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 19:04:33 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 19:04:33 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:35:52 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_4a9298c7", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4a9298c7", "email" => "test_71101369@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4a9298c7"], ["LIMIT", 1]]
  [1m[36mUser Create (9.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4a9298c7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:52.956244"], ["updated_at", "2025-12-05 19:35:52.956244"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=610 username=testuser_4a9298c7
Completed 201 Created in 128ms (Views: 0.4ms | ActiveRecord: 36.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_575da12d", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_575da12d"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_575da12d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:53.031121"], ["updated_at", "2025-12-05 19:35:53.031121"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 14ms (Views: 0.2ms | ActiveRecord: 7.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_f4fc3b28", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_f4fc3b28", "email" => "test_ba8fa120@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f4fc3b28"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 591ms (Views: 0.2ms | ActiveRecord: 5.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_e150b5d3", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e150b5d3", "email" => "test_6233735b@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e150b5d3"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e150b5d3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:53.683749"], ["updated_at", "2025-12-05 19:35:53.683749"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=612 username=testuser_e150b5d3
Completed 201 Created in 15ms (Views: 0.2ms | ActiveRecord: 8.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b7d351da"], ["LIMIT", 1]]
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_b7d351da"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:53.706226"], ["updated_at", "2025-12-05 19:35:53.706226"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_b7d351da", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_b7d351da", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b7d351da"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_b7d351da id=613
  [1m[36mUser Update (2.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:35:53.726777"], ["id", 613]]
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 8.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0905d0d2"], ["LIMIT", 1]]
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0905d0d2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:53.749683"], ["updated_at", "2025-12-05 19:35:53.749683"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_0905d0d2", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0905d0d2", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0905d0d2"], ["LIMIT", 1]]
Login failed for username=testuser_0905d0d2
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_15e92d6b"], ["LIMIT", 1]]
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_15e92d6b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:53.784493"], ["updated_at", "2025-12-05 19:35:53.784493"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_15e92d6b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_15e92d6b", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_15e92d6b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_15e92d6b id=615
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_78738146"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_78738146"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:53.821706"], ["updated_at", "2025-12-05 19:35:53.821706"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_78738146", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_78738146", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_78738146"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_78738146 id=616
  [1m[36mUser Update (3.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:35:53.837090"], ["id", 616]]
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 4.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=616
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (5.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:35:53.934413"], ["updated_at", "2025-12-05 19:35:53.934413"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 48ms (Views: 0.3ms | ActiveRecord: 14.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:35:53.960975"], ["updated_at", "2025-12-05 19:35:53.960975"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 5.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:35:53 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 20:35:54 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:35:54.005477"], ["updated_at", "2025-12-05 19:35:54.005477"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 6.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:35:54 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:35:57 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 10.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 40.6ms | GC: 0.0ms)
Completed 200 OK in 81ms (Views: 79.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 20:35:57 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 20:35:57 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 20:35:58 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:35:58.941753"], ["updated_at", "2025-12-05 19:35:58.941753"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 18ms (ActiveRecord: 7.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:35:58 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:35:59 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 20:35:59 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=617
  [1m[36mUser Update (4.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:35:59.980644"], ["id", 617]]
Redirected to http://localhost:3000/
Completed 302 Found in 30ms (ActiveRecord: 5.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 20:36:00 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 22.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 20:36:00 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:36:00 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:38:17 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c3ce988d", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c3ce988d", "email" => "test_9419a462@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c3ce988d"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c3ce988d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:18.309532"], ["updated_at", "2025-12-05 19:38:18.309532"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=618 username=testuser_c3ce988d
Completed 201 Created in 338ms (Views: 0.9ms | ActiveRecord: 20.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_d1d70af3", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d1d70af3"], ["LIMIT", 1]]
  [1m[36mUser Create (3.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d1d70af3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:18.533858"], ["updated_at", "2025-12-05 19:38:18.533858"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 53ms (Views: 0.8ms | ActiveRecord: 10.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:38:18 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c997063b", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c997063b", "email" => "test_fa9a6711@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c997063b"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 1641ms (Views: 0.4ms | ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_249af53e", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_249af53e", "email" => "test_7737df18@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_249af53e"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_249af53e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:20.341423"], ["updated_at", "2025-12-05 19:38:20.341423"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=620 username=testuser_249af53e
Completed 201 Created in 23ms (Views: 0.4ms | ActiveRecord: 8.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bcc87402"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bcc87402"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:20.372186"], ["updated_at", "2025-12-05 19:38:20.372186"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_bcc87402", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_bcc87402", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bcc87402"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_bcc87402 id=621
  [1m[36mUser Update (2.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:38:20.397475"], ["id", 621]]
Completed 200 OK in 21ms (Views: 0.4ms | ActiveRecord: 6.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3bb47988"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3bb47988"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:20.426881"], ["updated_at", "2025-12-05 19:38:20.426881"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_3bb47988", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3bb47988", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3bb47988"], ["LIMIT", 1]]
Login failed for username=testuser_3bb47988
Completed 401 Unauthorized in 7ms (Views: 0.4ms | ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_415dbf00"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_415dbf00"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:20.468604"], ["updated_at", "2025-12-05 19:38:20.468604"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_415dbf00", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_415dbf00", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_415dbf00"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_415dbf00 id=623
Completed 200 OK in 9ms (Views: 0.4ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e12b31b1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e12b31b1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:20.517938"], ["updated_at", "2025-12-05 19:38:20.517938"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e12b31b1", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e12b31b1", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e12b31b1"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e12b31b1 id=624
  [1m[36mUser Update (1.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:38:20.537512"], ["id", 624]]
Completed 200 OK in 14ms (Views: 0.5ms | ActiveRecord: 3.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=624
Completed 200 OK in 34ms (Views: 0.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:38:20.642932"], ["updated_at", "2025-12-05 19:38:20.642932"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.4ms | ActiveRecord: 11.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:38:20.679047"], ["updated_at", "2025-12-05 19:38:20.679047"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 15ms (Views: 0.4ms | ActiveRecord: 7.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:38:20.749471"], ["updated_at", "2025-12-05 19:38:20.749471"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 7.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:38:20 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:38:24 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 18.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 65.5ms | GC: 0.0ms)
Completed 200 OK in 183ms (Views: 178.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 20:38:25 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 20:38:25 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 20:38:27 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:38:27.459870"], ["updated_at", "2025-12-05 19:38:27.459870"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 23ms (ActiveRecord: 7.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:38:27 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:38:27 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 14.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 20:38:29 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=625
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:38:29.487065"], ["id", 625]]
Redirected to http://localhost:3000/
Completed 302 Found in 20ms (ActiveRecord: 2.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 20:38:29 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.6ms | GC: 0.0ms)
Completed 200 OK in 41ms (Views: 30.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 20:38:30 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:38:30 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 6.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:42:18 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c5bcb53f", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c5bcb53f", "email" => "test_c518358c@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c5bcb53f"], ["LIMIT", 1]]
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c5bcb53f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:18.337077"], ["updated_at", "2025-12-05 19:42:18.337077"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=626 username=testuser_c5bcb53f
Completed 201 Created in 114ms (Views: 0.4ms | ActiveRecord: 20.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_42ee8a94", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_42ee8a94"], ["LIMIT", 1]]
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_42ee8a94"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:18.400298"], ["updated_at", "2025-12-05 19:42:18.400298"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 16ms (Views: 0.3ms | ActiveRecord: 9.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:42:18 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_ea6fb1d7", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ea6fb1d7", "email" => "test_610aefd3@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ea6fb1d7"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 641ms (Views: 0.2ms | ActiveRecord: 5.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_af5c7647", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_af5c7647", "email" => "test_d4bd93ce@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_af5c7647"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_af5c7647"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:19.106046"], ["updated_at", "2025-12-05 19:42:19.106046"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=628 username=testuser_af5c7647
Completed 201 Created in 14ms (Views: 0.2ms | ActiveRecord: 7.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_645c5aa3"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_645c5aa3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:19.126184"], ["updated_at", "2025-12-05 19:42:19.126184"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_645c5aa3", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_645c5aa3", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_645c5aa3"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_645c5aa3 id=629
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:42:19.142072"], ["id", 629]]
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 6.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_665db786"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_665db786"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:19.162504"], ["updated_at", "2025-12-05 19:42:19.162504"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_665db786", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_665db786", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_665db786"], ["LIMIT", 1]]
Login failed for username=testuser_665db786
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_67c458bc"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_67c458bc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:19.189577"], ["updated_at", "2025-12-05 19:42:19.189577"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_67c458bc", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_67c458bc", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_67c458bc"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_67c458bc id=631
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_be1b9cd9"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_be1b9cd9"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:19.224742"], ["updated_at", "2025-12-05 19:42:19.224742"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_be1b9cd9", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_be1b9cd9", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_be1b9cd9"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_be1b9cd9 id=632
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:42:19.237327"], ["id", 632]]
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 3.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=632
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (5.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:42:19.294706"], ["updated_at", "2025-12-05 19:42:19.294706"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.5ms | ActiveRecord: 13.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (5.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:42:19.330647"], ["updated_at", "2025-12-05 19:42:19.330647"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 11ms (Views: 0.4ms | ActiveRecord: 7.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:42:19.388196"], ["updated_at", "2025-12-05 19:42:19.388196"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 6.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:42:19 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:42:21 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 8.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.6ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 31.5ms | GC: 0.0ms)
Completed 200 OK in 70ms (Views: 68.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 20:42:21 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 20:42:22 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 20:42:23 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:42:23.046441"], ["updated_at", "2025-12-05 19:42:23.046441"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 15ms (ActiveRecord: 6.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:42:23 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:42:23 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 20:42:23 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=633
  [1m[36mUser Update (2.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:42:23.822683"], ["id", 633]]
Redirected to http://localhost:3000/
Completed 302 Found in 18ms (ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 20:42:23 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 11.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 20:42:24 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:42:24 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:44:41 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_2ff1a0be", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_2ff1a0be", "email" => "test_70bc12b6@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2ff1a0be"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2ff1a0be"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:41.740525"], ["updated_at", "2025-12-05 19:44:41.740525"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=634 username=testuser_2ff1a0be
Completed 201 Created in 54ms (Views: 0.3ms | ActiveRecord: 11.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_9322ab12", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9322ab12"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9322ab12"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:41.774863"], ["updated_at", "2025-12-05 19:44:41.774863"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.2ms | ActiveRecord: 3.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:44:41 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_8d44f79c", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_8d44f79c", "email" => "test_f91b1b7d@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8d44f79c"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 316ms (Views: 0.2ms | ActiveRecord: 7.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_3aa51be0", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3aa51be0", "email" => "test_fe42a698@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3aa51be0"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3aa51be0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:42.120227"], ["updated_at", "2025-12-05 19:44:42.120227"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=636 username=testuser_3aa51be0
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_27cba7a7"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_27cba7a7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:42.133731"], ["updated_at", "2025-12-05 19:44:42.133731"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_27cba7a7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_27cba7a7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_27cba7a7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_27cba7a7 id=637
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:44:42.141187"], ["id", 637]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_94883fe5"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_94883fe5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:42.151788"], ["updated_at", "2025-12-05 19:44:42.151788"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_94883fe5", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_94883fe5", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_94883fe5"], ["LIMIT", 1]]
Login failed for username=testuser_94883fe5
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ebbcd54d"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ebbcd54d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:42.167586"], ["updated_at", "2025-12-05 19:44:42.167586"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ebbcd54d", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ebbcd54d", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ebbcd54d"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_ebbcd54d id=639
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_df2468e7"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_df2468e7"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:42.187340"], ["updated_at", "2025-12-05 19:44:42.187340"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_df2468e7", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_df2468e7", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_df2468e7"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_df2468e7 id=640
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:44:42.195174"], ["id", 640]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=640
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:44:42.226657"], ["updated_at", "2025-12-05 19:44:42.226657"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 8.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:44:42.243688"], ["updated_at", "2025-12-05 19:44:42.243688"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-05 19:44:42.266366"], ["updated_at", "2025-12-05 19:44:42.266366"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-05 20:44:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:44:44 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 33.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/icon.svg" for 127.0.0.1 at 2025-12-05 20:44:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.svg"):
  
Started GET "/icon.png" for 127.0.0.1 at 2025-12-05 20:44:44 +0100
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started POST "/api/register" for 127.0.0.1 at 2025-12-05 20:44:44 +0100
Processing by Api::UsersController#register as HTML
  Parameters: {"username" => "e2euser", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]", "commit" => "Register"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "e2euser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-05 19:44:44.966235"], ["updated_at", "2025-12-05 19:44:44.966235"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://localhost:3000/register
Completed 302 Found in 10ms (ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/register" for 127.0.0.1 at 2025-12-05 20:44:44 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:44:45 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/api/login" for 127.0.0.1 at 2025-12-05 20:44:45 +0100
Processing by Api::UsersController#login as HTML
  Parameters: {"username" => "e2euser", "password" => "[FILTERED]", "commit" => "Login"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "e2euser"], ["LIMIT", 1]]
Login success via Api::UsersController for user=e2euser id=641
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-05 19:44:45.566551"], ["id", 641]]
Redirected to http://localhost:3000/
Completed 302 Found in 8ms (ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-12-05 20:44:45 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 10.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/logout" for 127.0.0.1 at 2025-12-05 20:44:45 +0100
Processing by Api::UsersController#logout as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2025-12-05 20:44:45 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (17.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (9.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:07:01 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_b725d64b", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_b725d64b", "email" => "test_1eca5bad@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (22.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b725d64b"], ["LIMIT", 1]]
  [1m[36mUser Create (15.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_b725d64b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:04.083443"], ["updated_at", "2025-12-12 09:07:04.083443"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=642 username=testuser_b725d64b
Completed 201 Created in 1254ms (Views: 0.4ms | ActiveRecord: 73.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_4ec466de", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4ec466de"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4ec466de"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:04.332085"], ["updated_at", "2025-12-12 09:07:04.332085"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.2ms | ActiveRecord: 7.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:07:04 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_40fabca0", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_40fabca0", "email" => "test_7086b9af@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_40fabca0"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 507ms (Views: 0.2ms | ActiveRecord: 11.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_a4536901", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a4536901", "email" => "test_483b0e07@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a4536901"], ["LIMIT", 1]]
  [1m[36mUser Create (3.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a4536901"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:05.035098"], ["updated_at", "2025-12-12 09:07:05.035098"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=644 username=testuser_a4536901
Completed 201 Created in 12ms (Views: 0.2ms | ActiveRecord: 7.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6d94a929"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6d94a929"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:05.051155"], ["updated_at", "2025-12-12 09:07:05.051155"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6d94a929", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6d94a929", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6d94a929"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6d94a929 id=645
  [1m[36mUser Update (4.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:07:05.062840"], ["id", 645]]
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 8.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_71671e6a"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_71671e6a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:05.081452"], ["updated_at", "2025-12-12 09:07:05.081452"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_71671e6a", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_71671e6a", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_71671e6a"], ["LIMIT", 1]]
Login failed for username=testuser_71671e6a
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_44bbf5e0"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_44bbf5e0"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:05.097802"], ["updated_at", "2025-12-12 09:07:05.097802"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_44bbf5e0", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_44bbf5e0", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_44bbf5e0"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_44bbf5e0 id=647
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_96b27ff2"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_96b27ff2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:05.117595"], ["updated_at", "2025-12-12 09:07:05.117595"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_96b27ff2", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_96b27ff2", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_96b27ff2"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_96b27ff2 id=648
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:07:05.126388"], ["id", 648]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=648
Completed 200 OK in 110ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (7.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:07:05.276696"], ["updated_at", "2025-12-12 09:07:05.276696"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 15.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:07:05.303836"], ["updated_at", "2025-12-12 09:07:05.303836"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 4.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:07:05.333107"], ["updated_at", "2025-12-12 09:07:05.333107"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 3.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:05 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_2c785146", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_2c785146", "email" => "test_35230ecf@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2c785146"], ["LIMIT", 1]]
  [1m[36mUser Create (4.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2c785146"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:42.297824"], ["updated_at", "2025-12-12 09:07:42.297824"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=649 username=testuser_2c785146
Completed 201 Created in 56ms (Views: 0.3ms | ActiveRecord: 16.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_66683c7a", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_66683c7a"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_66683c7a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:42.335049"], ["updated_at", "2025-12-12 09:07:42.335049"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.2ms | ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_1189993c", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1189993c", "email" => "test_34a40dd6@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1189993c"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 374ms (Views: 0.2ms | ActiveRecord: 5.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_b1529645", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_b1529645", "email" => "test_9bd3d3ac@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b1529645"], ["LIMIT", 1]]
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_b1529645"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:42.757053"], ["updated_at", "2025-12-12 09:07:42.757053"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=651 username=testuser_b1529645
Completed 201 Created in 12ms (Views: 0.2ms | ActiveRecord: 7.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_126e3f11"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_126e3f11"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:42.774560"], ["updated_at", "2025-12-12 09:07:42.774560"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_126e3f11", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_126e3f11", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_126e3f11"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_126e3f11 id=652
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:07:42.784231"], ["id", 652]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 4.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_468dca79"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_468dca79"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:42.798380"], ["updated_at", "2025-12-12 09:07:42.798380"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_468dca79", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_468dca79", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_468dca79"], ["LIMIT", 1]]
Login failed for username=testuser_468dca79
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f96eda54"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_f96eda54"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:42.822022"], ["updated_at", "2025-12-12 09:07:42.822022"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_f96eda54", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_f96eda54", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f96eda54"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_f96eda54 id=654
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5defdf6d"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5defdf6d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:07:42.846052"], ["updated_at", "2025-12-12 09:07:42.846052"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_5defdf6d", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_5defdf6d", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5defdf6d"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_5defdf6d id=655
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:07:42.856056"], ["id", 655]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=655
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:07:42.910252"], ["updated_at", "2025-12-12 09:07:42.910252"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 11.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (34.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:07:42.934417"], ["updated_at", "2025-12-12 09:07:42.934417"]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 41ms (Views: 0.4ms | ActiveRecord: 37.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:07:42 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:07:43.001642"], ["updated_at", "2025-12-12 09:07:43.001642"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:07:43 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:08:20 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_091f0ec5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_091f0ec5", "email" => "test_8c806b16@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_091f0ec5"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_091f0ec5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:08:21.020782"], ["updated_at", "2025-12-12 09:08:21.020782"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=656 username=testuser_091f0ec5
Completed 201 Created in 67ms (Views: 0.3ms | ActiveRecord: 18.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_81ed3154", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_81ed3154"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_81ed3154"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:08:21.063915"], ["updated_at", "2025-12-12 09:08:21.063915"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 0.2ms | ActiveRecord: 7.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_65a42158", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_65a42158", "email" => "test_f8c14241@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_65a42158"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 318ms (Views: 0.1ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_9f89f065", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9f89f065", "email" => "test_69b4b20b@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9f89f065"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9f89f065"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:08:21.415633"], ["updated_at", "2025-12-12 09:08:21.415633"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=658 username=testuser_9f89f065
Completed 201 Created in 8ms (Views: 0.2ms | ActiveRecord: 5.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d03391b3"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d03391b3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:08:21.434065"], ["updated_at", "2025-12-12 09:08:21.434065"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_d03391b3", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d03391b3", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d03391b3"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d03391b3 id=659
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:08:21.447765"], ["id", 659]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 6.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4de4ac98"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4de4ac98"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:08:21.460760"], ["updated_at", "2025-12-12 09:08:21.460760"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_4de4ac98", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4de4ac98", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4de4ac98"], ["LIMIT", 1]]
Login failed for username=testuser_4de4ac98
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_69cccf10"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_69cccf10"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:08:21.478374"], ["updated_at", "2025-12-12 09:08:21.478374"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_69cccf10", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_69cccf10", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_69cccf10"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_69cccf10 id=661
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9ca0bcb4"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9ca0bcb4"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:08:21.501660"], ["updated_at", "2025-12-12 09:08:21.501660"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9ca0bcb4", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9ca0bcb4", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9ca0bcb4"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9ca0bcb4 id=662
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:08:21.509058"], ["id", 662]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=662
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:08:21.539768"], ["updated_at", "2025-12-12 09:08:21.539768"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 7.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:08:21.555864"], ["updated_at", "2025-12-12 09:08:21.555864"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 16ms (Views: 0.2ms | ActiveRecord: 6.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:08:21.591540"], ["updated_at", "2025-12-12 09:08:21.591540"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 4.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:08:21 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Unset [31mRACK_ENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:10:07 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_622519f1", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_622519f1", "email" => "test_0413e55a@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_622519f1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_622519f1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:10:07.386065"], ["updated_at", "2025-12-12 09:10:07.386065"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=663 username=testuser_622519f1
Completed 201 Created in 57ms (Views: 0.3ms | ActiveRecord: 14.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_00903e32", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_00903e32"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_00903e32"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:10:07.416529"], ["updated_at", "2025-12-12 09:10:07.416529"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 7ms (Views: 0.1ms | ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:10:07 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c8d25839", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c8d25839", "email" => "test_275d425a@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c8d25839"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 403ms (Views: 0.3ms | ActiveRecord: 6.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:10:07 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_5d1031bc", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_5d1031bc", "email" => "test_569c8c8a@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5d1031bc"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5d1031bc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:10:07.873135"], ["updated_at", "2025-12-12 09:10:07.873135"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=665 username=testuser_5d1031bc
Completed 201 Created in 14ms (Views: 0.3ms | ActiveRecord: 7.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f1c9c88c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_f1c9c88c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:10:07.900124"], ["updated_at", "2025-12-12 09:10:07.900124"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:10:07 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_f1c9c88c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_f1c9c88c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f1c9c88c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_f1c9c88c id=666
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:10:07.917703"], ["id", 666]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 6.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a65e3d6d"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a65e3d6d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:10:07.933657"], ["updated_at", "2025-12-12 09:10:07.933657"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:10:07 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_a65e3d6d", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a65e3d6d", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a65e3d6d"], ["LIMIT", 1]]
Login failed for username=testuser_a65e3d6d
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_afd3d5fb"], ["LIMIT", 1]]
  [1m[36mUser Create (31.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_afd3d5fb"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:10:07.964874"], ["updated_at", "2025-12-12 09:10:07.964874"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_afd3d5fb", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_afd3d5fb", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_afd3d5fb"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_afd3d5fb id=668
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f87d18e2"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_f87d18e2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:10:08.021628"], ["updated_at", "2025-12-12 09:10:08.021628"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_f87d18e2", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_f87d18e2", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f87d18e2"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_f87d18e2 id=669
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:10:08.029933"], ["id", 669]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=669
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:10:08.063917"], ["updated_at", "2025-12-12 09:10:08.063917"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 8.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:10:08.081285"], ["updated_at", "2025-12-12 09:10:08.081285"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 5.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.4ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:10:08.118254"], ["updated_at", "2025-12-12 09:10:08.118254"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.4ms | ActiveRecord: 6.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:10:08 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:16:54 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_8a792d29", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_8a792d29", "email" => "test_6a194a0e@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8a792d29"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8a792d29"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:16:55.038435"], ["updated_at", "2025-12-12 09:16:55.038435"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=670 username=testuser_8a792d29
Completed 201 Created in 103ms (Views: 0.4ms | ActiveRecord: 19.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_d2ab5318", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d2ab5318"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d2ab5318"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:16:55.102600"], ["updated_at", "2025-12-12 09:16:55.102600"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 38ms (Views: 0.2ms | ActiveRecord: 8.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_75564f4d", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_75564f4d", "email" => "test_d7207db0@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_75564f4d"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 463ms (Views: 0.2ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.5ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_acfa9d89", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_acfa9d89", "email" => "test_66190906@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_acfa9d89"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_acfa9d89"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:16:55.642648"], ["updated_at", "2025-12-12 09:16:55.642648"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=672 username=testuser_acfa9d89
Completed 201 Created in 10ms (Views: 0.2ms | ActiveRecord: 5.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9a8bff59"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9a8bff59"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:16:55.658393"], ["updated_at", "2025-12-12 09:16:55.658393"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9a8bff59", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9a8bff59", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9a8bff59"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9a8bff59 id=673
  [1m[36mUser Update (2.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:16:55.669462"], ["id", 673]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_af6e8dec"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_af6e8dec"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:16:55.683452"], ["updated_at", "2025-12-12 09:16:55.683452"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_af6e8dec", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_af6e8dec", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_af6e8dec"], ["LIMIT", 1]]
Login failed for username=testuser_af6e8dec
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d45d92aa"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d45d92aa"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:16:55.697785"], ["updated_at", "2025-12-12 09:16:55.697785"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_d45d92aa", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d45d92aa", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d45d92aa"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d45d92aa id=675
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2fd29af8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_2fd29af8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:16:55.722061"], ["updated_at", "2025-12-12 09:16:55.722061"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_2fd29af8", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_2fd29af8", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_2fd29af8"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_2fd29af8 id=676
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:16:55.730895"], ["id", 676]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=676
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:16:55.784580"], ["updated_at", "2025-12-12 09:16:55.784580"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 10.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:16:55.804491"], ["updated_at", "2025-12-12 09:16:55.804491"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 4.1ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:16:55.837108"], ["updated_at", "2025-12-12 09:16:55.837108"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:16:55 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:17:27 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_01c226b6", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_01c226b6", "email" => "test_bd159506@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_01c226b6"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_01c226b6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:17:27.832448"], ["updated_at", "2025-12-12 09:17:27.832448"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=677 username=testuser_01c226b6
Completed 201 Created in 70ms (Views: 0.2ms | ActiveRecord: 17.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_71ba7c73", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_71ba7c73"], ["LIMIT", 1]]
  [1m[36mUser Create (2.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_71ba7c73"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:17:27.909490"], ["updated_at", "2025-12-12 09:17:27.909490"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.8ms | ActiveRecord: 7.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:17:27 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c76372f5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c76372f5", "email" => "test_6d203081@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c76372f5"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 397ms (Views: 0.2ms | ActiveRecord: 5.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_93648856", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_93648856", "email" => "test_d376c334@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_93648856"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_93648856"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:17:28.347322"], ["updated_at", "2025-12-12 09:17:28.347322"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=679 username=testuser_93648856
Completed 201 Created in 10ms (Views: 0.2ms | ActiveRecord: 5.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e42e9e54"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e42e9e54"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:17:28.366140"], ["updated_at", "2025-12-12 09:17:28.366140"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e42e9e54", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e42e9e54", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e42e9e54"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e42e9e54 id=680
  [1m[36mUser Update (2.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:17:28.385907"], ["id", 680]]
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 10.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_75db2c79"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_75db2c79"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:17:28.406434"], ["updated_at", "2025-12-12 09:17:28.406434"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_75db2c79", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_75db2c79", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_75db2c79"], ["LIMIT", 1]]
Login failed for username=testuser_75db2c79
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_15eb08dc"], ["LIMIT", 1]]
  [1m[36mUser Create (6.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_15eb08dc"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:17:28.431660"], ["updated_at", "2025-12-12 09:17:28.431660"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_15eb08dc", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_15eb08dc", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_15eb08dc"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_15eb08dc id=682
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8bf86f65"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8bf86f65"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:17:28.464182"], ["updated_at", "2025-12-12 09:17:28.464182"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_8bf86f65", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_8bf86f65", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8bf86f65"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_8bf86f65 id=683
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:17:28.474685"], ["id", 683]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=683
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:17:28.527830"], ["updated_at", "2025-12-12 09:17:28.527830"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 10.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:17:28.548774"], ["updated_at", "2025-12-12 09:17:28.548774"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 9ms (Views: 0.2ms | ActiveRecord: 6.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:17:28.586130"], ["updated_at", "2025-12-12 09:17:28.586130"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:17:28 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c74430bd", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c74430bd", "email" => "test_2fbde8de@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c74430bd"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c74430bd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:21:45.364411"], ["updated_at", "2025-12-12 09:21:45.364411"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=684 username=testuser_c74430bd
Completed 201 Created in 54ms (Views: 0.2ms | ActiveRecord: 11.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c4768e2a", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c4768e2a"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c4768e2a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:21:45.401235"], ["updated_at", "2025-12-12 09:21:45.401235"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.1ms | ActiveRecord: 5.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_4251a197", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4251a197", "email" => "test_59774d19@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4251a197"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 401ms (Views: 0.2ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_95731eb6", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_95731eb6", "email" => "test_ec845fb1@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_95731eb6"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_95731eb6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:21:45.836877"], ["updated_at", "2025-12-12 09:21:45.836877"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=686 username=testuser_95731eb6
Completed 201 Created in 11ms (Views: 0.4ms | ActiveRecord: 5.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fdc29b70"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_fdc29b70"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:21:45.861284"], ["updated_at", "2025-12-12 09:21:45.861284"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_fdc29b70", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_fdc29b70", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fdc29b70"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_fdc29b70 id=687
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:21:45.885251"], ["id", 687]]
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 10.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_369fc23d"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_369fc23d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:21:45.908904"], ["updated_at", "2025-12-12 09:21:45.908904"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_369fc23d", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_369fc23d", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_369fc23d"], ["LIMIT", 1]]
Login failed for username=testuser_369fc23d
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_11c37061"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_11c37061"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:21:45.929965"], ["updated_at", "2025-12-12 09:21:45.929965"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_11c37061", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_11c37061", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_11c37061"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_11c37061 id=689
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e3cee11b"], ["LIMIT", 1]]
  [1m[36mUser Create (18.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e3cee11b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:21:45.957303"], ["updated_at", "2025-12-12 09:21:45.957303"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e3cee11b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e3cee11b", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e3cee11b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e3cee11b id=690
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:21:45.986874"], ["id", 690]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:21:45 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=690
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:21:46 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:21:46.026046"], ["updated_at", "2025-12-12 09:21:46.026046"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 7.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:21:46 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:21:46.047042"], ["updated_at", "2025-12-12 09:21:46.047042"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:21:46 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:21:46 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:21:46.073883"], ["updated_at", "2025-12-12 09:21:46.073883"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:21:46 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:22:17 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_4aac21b2", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4aac21b2", "email" => "test_5af0a2aa@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4aac21b2"], ["LIMIT", 1]]
  [1m[36mUser Create (32.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4aac21b2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:22:17.817930"], ["updated_at", "2025-12-12 09:22:17.817930"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=691 username=testuser_4aac21b2
Completed 201 Created in 90ms (Views: 0.4ms | ActiveRecord: 44.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_0aa87c81", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0aa87c81"], ["LIMIT", 1]]
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0aa87c81"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:22:17.893362"], ["updated_at", "2025-12-12 09:22:17.893362"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.2ms | ActiveRecord: 8.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:22:17 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_885a4b5e", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_885a4b5e", "email" => "test_c4c564a4@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_885a4b5e"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 364ms (Views: 0.2ms | ActiveRecord: 6.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_c78ed1a5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c78ed1a5", "email" => "test_4b1c5c0e@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c78ed1a5"], ["LIMIT", 1]]
  [1m[36mUser Create (3.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c78ed1a5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:22:18.303250"], ["updated_at", "2025-12-12 09:22:18.303250"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=693 username=testuser_c78ed1a5
Completed 201 Created in 14ms (Views: 0.2ms | ActiveRecord: 6.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (6.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (9.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9bad22b9"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9bad22b9"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:22:18.331855"], ["updated_at", "2025-12-12 09:22:18.331855"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9bad22b9", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9bad22b9", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9bad22b9"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9bad22b9 id=694
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:22:18.345541"], ["id", 694]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 4.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3b32c8df"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3b32c8df"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:22:18.359604"], ["updated_at", "2025-12-12 09:22:18.359604"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_3b32c8df", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3b32c8df", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3b32c8df"], ["LIMIT", 1]]
Login failed for username=testuser_3b32c8df
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_24b2976b"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_24b2976b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:22:18.379202"], ["updated_at", "2025-12-12 09:22:18.379202"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_24b2976b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_24b2976b", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_24b2976b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_24b2976b id=696
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7599efdd"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7599efdd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:22:18.402829"], ["updated_at", "2025-12-12 09:22:18.402829"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_7599efdd", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7599efdd", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7599efdd"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_7599efdd id=697
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:22:18.416770"], ["id", 697]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=697
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:22:18.459598"], ["updated_at", "2025-12-12 09:22:18.459598"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 9.3ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:22:18.474582"], ["updated_at", "2025-12-12 09:22:18.474582"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 3.3ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:22:18.497267"], ["updated_at", "2025-12-12 09:22:18.497267"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:22:18 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_80c99ffd", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_80c99ffd", "email" => "test_e4335c0b@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_80c99ffd"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_80c99ffd"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:26:01.260377"], ["updated_at", "2025-12-12 09:26:01.260377"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=698 username=testuser_80c99ffd
Completed 201 Created in 68ms (Views: 0.4ms | ActiveRecord: 17.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_49d4d69d", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_49d4d69d"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_49d4d69d"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:26:01.313355"], ["updated_at", "2025-12-12 09:26:01.313355"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.2ms | ActiveRecord: 7.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_a1bd334f", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a1bd334f", "email" => "test_5a56a54d@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a1bd334f"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 377ms (Views: 0.2ms | ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_1269f486", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1269f486", "email" => "test_1b708485@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1269f486"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1269f486"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:26:01.735203"], ["updated_at", "2025-12-12 09:26:01.735203"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=700 username=testuser_1269f486
Completed 201 Created in 8ms (Views: 0.2ms | ActiveRecord: 5.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0cda5d60"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0cda5d60"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:26:01.748765"], ["updated_at", "2025-12-12 09:26:01.748765"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_0cda5d60", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0cda5d60", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0cda5d60"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_0cda5d60 id=701
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:26:01.760389"], ["id", 701]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ed0cfe0b"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ed0cfe0b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:26:01.772841"], ["updated_at", "2025-12-12 09:26:01.772841"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ed0cfe0b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ed0cfe0b", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ed0cfe0b"], ["LIMIT", 1]]
Login failed for username=testuser_ed0cfe0b
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_47f0ee6c"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_47f0ee6c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:26:01.789502"], ["updated_at", "2025-12-12 09:26:01.789502"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_47f0ee6c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_47f0ee6c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_47f0ee6c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_47f0ee6c id=703
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1f327b36"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1f327b36"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:26:01.820432"], ["updated_at", "2025-12-12 09:26:01.820432"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1f327b36", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1f327b36", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1f327b36"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1f327b36 id=704
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:26:01.830558"], ["id", 704]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=704
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:26:01.877255"], ["updated_at", "2025-12-12 09:26:01.877255"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 8.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:26:01.895757"], ["updated_at", "2025-12-12 09:26:01.895757"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 3.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:26:01.925235"], ["updated_at", "2025-12-12 09:26:01.925235"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 5.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:26:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_a5e13c78", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_a5e13c78", "email" => "test_32880397@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_a5e13c78"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_a5e13c78"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:30:48.297222"], ["updated_at", "2025-12-12 09:30:48.297222"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=705 username=testuser_a5e13c78
Completed 201 Created in 54ms (Views: 0.2ms | ActiveRecord: 11.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_fb59a22c", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_fb59a22c"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_fb59a22c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:30:48.335219"], ["updated_at", "2025-12-12 09:30:48.335219"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.2ms | ActiveRecord: 4.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_09ff2bf2", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_09ff2bf2", "email" => "test_d753a08f@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_09ff2bf2"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 395ms (Views: 0.2ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_672196ff", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_672196ff", "email" => "test_2677e7ed@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_672196ff"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_672196ff"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:30:48.776716"], ["updated_at", "2025-12-12 09:30:48.776716"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=707 username=testuser_672196ff
Completed 201 Created in 10ms (Views: 0.2ms | ActiveRecord: 5.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d06d1b2c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d06d1b2c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:30:48.790686"], ["updated_at", "2025-12-12 09:30:48.790686"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_d06d1b2c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d06d1b2c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d06d1b2c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d06d1b2c id=708
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:30:48.803112"], ["id", 708]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 4.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_34cc5b83"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_34cc5b83"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:30:48.817115"], ["updated_at", "2025-12-12 09:30:48.817115"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_34cc5b83", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_34cc5b83", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_34cc5b83"], ["LIMIT", 1]]
Login failed for username=testuser_34cc5b83
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_51106268"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_51106268"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:30:48.834609"], ["updated_at", "2025-12-12 09:30:48.834609"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_51106268", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_51106268", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_51106268"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_51106268 id=710
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e61cdf08"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e61cdf08"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:30:48.858947"], ["updated_at", "2025-12-12 09:30:48.858947"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e61cdf08", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e61cdf08", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e61cdf08"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e61cdf08 id=711
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:30:48.873084"], ["id", 711]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=711
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (4.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:30:48.910343"], ["updated_at", "2025-12-12 09:30:48.910343"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 10.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:30:48.931070"], ["updated_at", "2025-12-12 09:30:48.931070"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 4.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:30:48.963809"], ["updated_at", "2025-12-12 09:30:48.963809"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 4.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:30:48 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (5.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_61219fad", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_61219fad", "email" => "test_2166a0fd@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_61219fad"], ["LIMIT", 1]]
  [1m[36mUser Create (2.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_61219fad"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:12.403796"], ["updated_at", "2025-12-12 09:56:12.403796"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=712 username=testuser_61219fad
Completed 201 Created in 86ms (Views: 0.3ms | ActiveRecord: 20.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_5e9a63a5", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5e9a63a5"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5e9a63a5"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:12.446686"], ["updated_at", "2025-12-12 09:56:12.446686"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.2ms | ActiveRecord: 7.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_067eb360", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_067eb360", "email" => "test_f72083ca@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_067eb360"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 314ms (Views: 0.2ms | ActiveRecord: 8.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_490726da", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_490726da", "email" => "test_8ae0ccad@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_490726da"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_490726da"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:12.808235"], ["updated_at", "2025-12-12 09:56:12.808235"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=714 username=testuser_490726da
Completed 201 Created in 13ms (Views: 0.2ms | ActiveRecord: 7.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5e3c7ad8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_5e3c7ad8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:12.828689"], ["updated_at", "2025-12-12 09:56:12.828689"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_5e3c7ad8", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_5e3c7ad8", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_5e3c7ad8"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_5e3c7ad8 id=715
  [1m[36mUser Update (2.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:56:12.842367"], ["id", 715]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 5.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_39428ed1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_39428ed1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:12.860344"], ["updated_at", "2025-12-12 09:56:12.860344"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_39428ed1", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_39428ed1", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_39428ed1"], ["LIMIT", 1]]
Login failed for username=testuser_39428ed1
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_32a7ed15"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_32a7ed15"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:12.888086"], ["updated_at", "2025-12-12 09:56:12.888086"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_32a7ed15", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_32a7ed15", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_32a7ed15"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_32a7ed15 id=717
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_44084bc9"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_44084bc9"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:12.914274"], ["updated_at", "2025-12-12 09:56:12.914274"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_44084bc9", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_44084bc9", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_44084bc9"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_44084bc9 id=718
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:56:12.928380"], ["id", 718]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=718
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.9ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:56:12.966343"], ["updated_at", "2025-12-12 09:56:12.966343"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 9.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:56:12.981505"], ["updated_at", "2025-12-12 09:56:12.981505"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 4.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:12 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:56:13 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:56:13.013137"], ["updated_at", "2025-12-12 09:56:13.013137"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 5.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:13 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_8f1aef39", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_8f1aef39", "email" => "test_360cc45c@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8f1aef39"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8f1aef39"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:49.213880"], ["updated_at", "2025-12-12 09:56:49.213880"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=719 username=testuser_8f1aef39
Completed 201 Created in 58ms (Views: 0.4ms | ActiveRecord: 19.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_8a9df036", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8a9df036"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8a9df036"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:49.252028"], ["updated_at", "2025-12-12 09:56:49.252028"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.1ms | ActiveRecord: 5.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_3cc93798", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3cc93798", "email" => "test_5d7b7e91@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3cc93798"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 321ms (Views: 0.2ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_bfe7d78f", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_bfe7d78f", "email" => "test_7379acdf@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_bfe7d78f"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_bfe7d78f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:49.607287"], ["updated_at", "2025-12-12 09:56:49.607287"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=721 username=testuser_bfe7d78f
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 4.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ba88235f"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ba88235f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:49.620350"], ["updated_at", "2025-12-12 09:56:49.620350"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_ba88235f", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ba88235f", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ba88235f"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_ba88235f id=722
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:56:49.630942"], ["id", 722]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_dd52cfe8"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_dd52cfe8"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:49.643968"], ["updated_at", "2025-12-12 09:56:49.643968"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_dd52cfe8", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_dd52cfe8", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_dd52cfe8"], ["LIMIT", 1]]
Login failed for username=testuser_dd52cfe8
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1a0c1b8b"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1a0c1b8b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:49.662591"], ["updated_at", "2025-12-12 09:56:49.662591"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1a0c1b8b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1a0c1b8b", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1a0c1b8b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1a0c1b8b id=724
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3466b268"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_3466b268"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 09:56:49.683886"], ["updated_at", "2025-12-12 09:56:49.683886"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_3466b268", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_3466b268", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_3466b268"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_3466b268 id=725
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 09:56:49.693120"], ["id", 725]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=725
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (7.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:56:49.731634"], ["updated_at", "2025-12-12 09:56:49.731634"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 13.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:56:49.751637"], ["updated_at", "2025-12-12 09:56:49.751637"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 4ms (Views: 0.1ms | ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 09:56:49.771185"], ["updated_at", "2025-12-12 09:56:49.771185"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 2.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 10:56:49 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:03:34 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_9005a61f", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9005a61f", "email" => "test_7a9393b4@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9005a61f"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9005a61f"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:03:34.539870"], ["updated_at", "2025-12-12 10:03:34.539870"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=726 username=testuser_9005a61f
Completed 201 Created in 63ms (Views: 0.2ms | ActiveRecord: 14.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_67a9bda1", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_67a9bda1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_67a9bda1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:03:34.578505"], ["updated_at", "2025-12-12 10:03:34.578505"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 10ms (Views: 0.2ms | ActiveRecord: 6.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:03:34 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_d8198fa0", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d8198fa0", "email" => "test_8a67a96a@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8198fa0"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 334ms (Views: 0.1ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:03:34 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_4e92f219", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4e92f219", "email" => "test_b9436d04@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4e92f219"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4e92f219"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:03:34.948426"], ["updated_at", "2025-12-12 10:03:34.948426"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=728 username=testuser_4e92f219
Completed 201 Created in 8ms (Views: 0.3ms | ActiveRecord: 4.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6072b213"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_6072b213"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:03:34.959858"], ["updated_at", "2025-12-12 10:03:34.959858"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:03:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_6072b213", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_6072b213", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_6072b213"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_6072b213 id=729
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:03:34.970031"], ["id", 729]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c4c6f309"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c4c6f309"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:03:34.980771"], ["updated_at", "2025-12-12 10:03:34.980771"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:03:34 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_c4c6f309", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c4c6f309", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c4c6f309"], ["LIMIT", 1]]
Login failed for username=testuser_c4c6f309
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b20fbf34"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_b20fbf34"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:03:34.995977"], ["updated_at", "2025-12-12 10:03:34.995977"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_b20fbf34", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_b20fbf34", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b20fbf34"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_b20fbf34 id=731
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_dd796c95"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_dd796c95"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:03:35.013642"], ["updated_at", "2025-12-12 10:03:35.013642"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_dd796c95", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_dd796c95", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_dd796c95"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_dd796c95 id=732
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:03:35.023569"], ["id", 732]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=732
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:03:35.063179"], ["updated_at", "2025-12-12 10:03:35.063179"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 10.1ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:03:35.080602"], ["updated_at", "2025-12-12 10:03:35.080602"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 4.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:03:35.105218"], ["updated_at", "2025-12-12 10:03:35.105218"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:03:35 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (11.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.025318"], ["updated_at", "2025-12-12 10:09:56.025318"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.076201"], ["updated_at", "2025-12-12 10:09:56.076201"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.097771"], ["updated_at", "2025-12-12 10:09:56.097771"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.126052"], ["updated_at", "2025-12-12 10:09:56.126052"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_ac41590e", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_ac41590e", "email" => "test_d71af5fb@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_ac41590e"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_ac41590e"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.252154"], ["updated_at", "2025-12-12 10:09:56.252154"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=737 username=testuser_ac41590e
Completed 201 Created in 44ms (Views: 0.4ms | ActiveRecord: 7.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_15170634", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_15170634"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_15170634"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.293655"], ["updated_at", "2025-12-12 10:09:56.293655"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.2ms | ActiveRecord: 5.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_657fd7bf", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_657fd7bf", "email" => "test_1a5cf23e@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_657fd7bf"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 8ms (Views: 0.1ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_0920814a", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0920814a", "email" => "test_6f44e74c@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0920814a"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0920814a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.341172"], ["updated_at", "2025-12-12 10:09:56.341172"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=739 username=testuser_0920814a
Completed 201 Created in 14ms (Views: 0.3ms | ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_87310009"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_87310009"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.368256"], ["updated_at", "2025-12-12 10:09:56.368256"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_87310009", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_87310009", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_87310009"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_87310009 id=740
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:09:56.383597"], ["id", 740]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 4.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c1d6b224"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c1d6b224"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.395908"], ["updated_at", "2025-12-12 10:09:56.395908"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_c1d6b224", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c1d6b224", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c1d6b224"], ["LIMIT", 1]]
Login failed for username=testuser_c1d6b224
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1b0461da"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1b0461da"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.413020"], ["updated_at", "2025-12-12 10:09:56.413020"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1b0461da", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1b0461da", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1b0461da"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1b0461da id=742
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1d775d6c"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1d775d6c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:56.435680"], ["updated_at", "2025-12-12 10:09:56.435680"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1d775d6c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1d775d6c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1d775d6c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1d775d6c id=743
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:09:56.448688"], ["id", 743]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=743
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2025-12-12 11:09:56 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.5ms | GC: 0.0ms)
Completed 200 OK in 646ms (Views: 462.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.2ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:57.182878"], ["updated_at", "2025-12-12 10:09:57.182878"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "force_password_reset" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["force_password_reset", "[FILTERED]"], ["updated_at", "2025-12-12 10:09:57.210954"], ["id", 744]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 35.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 37.2ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 42.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:57.300234"], ["updated_at", "2025-12-12 10:09:57.300234"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 17.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.1ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 21.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:09:57.373142"], ["updated_at", "2025-12-12 10:09:57.373142"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:09:57.398793"], ["updated_at", "2025-12-12 10:09:57.398793"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 5.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:09:57.421330"], ["updated_at", "2025-12-12 10:09:57.421330"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 5.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.1ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:09:57.458775"], ["updated_at", "2025-12-12 10:09:57.458775"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 5.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:09:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:56.780660"], ["updated_at", "2025-12-12 10:10:56.780660"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:56.802228"], ["updated_at", "2025-12-12 10:10:56.802228"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:56.814881"], ["updated_at", "2025-12-12 10:10:56.814881"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:56.827984"], ["updated_at", "2025-12-12 10:10:56.827984"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", nil], ["created_at", "2025-12-12 10:10:56.842575"], ["updated_at", "2025-12-12 10:10:56.842575"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:10:56 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_930850da", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_930850da", "email" => "test_c934ce01@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_930850da"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_930850da"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:56.964265"], ["updated_at", "2025-12-12 10:10:56.964265"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=751 username=testuser_930850da
Completed 201 Created in 30ms (Views: 0.4ms | ActiveRecord: 4.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_c163fe47", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c163fe47"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c163fe47"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:57.000645"], ["updated_at", "2025-12-12 10:10:57.000645"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 0.2ms | ActiveRecord: 6.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_31575dba", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_31575dba", "email" => "test_a1ef4e2e@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_31575dba"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 12ms (Views: 0.2ms | ActiveRecord: 5.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_c51c0a56", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c51c0a56", "email" => "test_1be11038@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c51c0a56"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c51c0a56"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:57.062308"], ["updated_at", "2025-12-12 10:10:57.062308"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=753 username=testuser_c51c0a56
Completed 201 Created in 13ms (Views: 0.2ms | ActiveRecord: 8.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e549c9a6"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_e549c9a6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:57.083054"], ["updated_at", "2025-12-12 10:10:57.083054"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_e549c9a6", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_e549c9a6", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_e549c9a6"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_e549c9a6 id=754
  [1m[36mUser Update (1.8ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:10:57.098685"], ["id", 754]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 7.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_faa7ecb6"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_faa7ecb6"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:57.116857"], ["updated_at", "2025-12-12 10:10:57.116857"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_faa7ecb6", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_faa7ecb6", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_faa7ecb6"], ["LIMIT", 1]]
Login failed for username=testuser_faa7ecb6
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_47a12060"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_47a12060"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:57.145078"], ["updated_at", "2025-12-12 10:10:57.145078"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_47a12060", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_47a12060", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_47a12060"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_47a12060 id=756
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8b34a72a"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_8b34a72a"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:10:57.168925"], ["updated_at", "2025-12-12 10:10:57.168925"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_8b34a72a", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_8b34a72a", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_8b34a72a"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_8b34a72a id=757
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:10:57.179119"], ["id", 757]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=757
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 24.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:10:57 +0100
Processing by PasswordsController#edit as HTML
Redirected to http://test.host/login
Completed 404 Not Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find User without an ID):
  
app/controllers/passwords_controller.rb:5:in 'PasswordsController#edit'
app/middleware/prometheus_middleware.rb:13:in 'PrometheusMiddleware#call'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:11:00.095954"], ["updated_at", "2025-12-12 10:11:00.095954"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by PasswordsController#edit as HTML
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 758], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 14.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 19.3ms | ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:11:00.149694"], ["updated_at", "2025-12-12 10:11:00.149694"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by PasswordsController#edit as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 759], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 2.6ms | ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:11:00.179379"], ["updated_at", "2025-12-12 10:11:00.179379"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/change_password" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by PasswordsController#update as HTML
  Parameters: {"user" => {"password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 760], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = $1, "force_password_reset" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["updated_at", "2025-12-12 10:11:00.200147"], ["id", 760]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 2.1ms | ActiveRecord: 11.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:11:00.216845"], ["updated_at", "2025-12-12 10:11:00.216845"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/change_password" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by PasswordsController#update as HTML
  Parameters: {"user" => {"password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 761], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 4.7ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 10.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:11:00.266972"], ["updated_at", "2025-12-12 10:11:00.266972"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by SessionsController#login as HTML
Redirected to http://test.host/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser2"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:11:00.319154"], ["updated_at", "2025-12-12 10:11:00.319154"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by SessionsController#register as HTML
Redirected to http://test.host/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:11:00.340911"], ["updated_at", "2025-12-12 10:11:00.340911"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 5.2ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:11:00.356390"], ["updated_at", "2025-12-12 10:11:00.356390"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 3.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (1.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:11:00.383379"], ["updated_at", "2025-12-12 10:11:00.383379"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:11:00 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:12:59.901912"], ["updated_at", "2025-12-12 10:12:59.901912"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:12:59.934234"], ["updated_at", "2025-12-12 10:12:59.934234"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:12:59.961307"], ["updated_at", "2025-12-12 10:12:59.961307"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:12:59.988718"], ["updated_at", "2025-12-12 10:12:59.988718"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", nil], ["created_at", "2025-12-12 10:13:00.007631"], ["updated_at", "2025-12-12 10:13:00.007631"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_cafddc88", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_cafddc88", "email" => "test_9f7aa8b8@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_cafddc88"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_cafddc88"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:00.122123"], ["updated_at", "2025-12-12 10:13:00.122123"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=768 username=testuser_cafddc88
Completed 201 Created in 37ms (Views: 0.2ms | ActiveRecord: 7.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_b54768a3", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_b54768a3"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_b54768a3"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:00.165401"], ["updated_at", "2025-12-12 10:13:00.165401"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.2ms | ActiveRecord: 9.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_406c95c8", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_406c95c8", "email" => "test_752576cb@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_406c95c8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 9ms (Views: 0.1ms | ActiveRecord: 3.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_be5b3535", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_be5b3535", "email" => "test_7931e1e2@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_be5b3535"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_be5b3535"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:00.203336"], ["updated_at", "2025-12-12 10:13:00.203336"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=770 username=testuser_be5b3535
Completed 201 Created in 8ms (Views: 0.2ms | ActiveRecord: 4.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d2b3de89"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d2b3de89"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:00.214873"], ["updated_at", "2025-12-12 10:13:00.214873"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_d2b3de89", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d2b3de89", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d2b3de89"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_d2b3de89 id=771
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:13:00.224354"], ["id", 771]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4f91c5df"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_4f91c5df"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:00.235628"], ["updated_at", "2025-12-12 10:13:00.235628"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_4f91c5df", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_4f91c5df", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_4f91c5df"], ["LIMIT", 1]]
Login failed for username=testuser_4f91c5df
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c28ae13b"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_c28ae13b"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:00.254310"], ["updated_at", "2025-12-12 10:13:00.254310"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_c28ae13b", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_c28ae13b", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_c28ae13b"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_c28ae13b id=773
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_01540032"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_01540032"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:00.274965"], ["updated_at", "2025-12-12 10:13:00.274965"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_01540032", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_01540032", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_01540032"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_01540032 id=774
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:13:00.287104"], ["id", 774]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 3.0ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=774
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 37.0ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 46.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:13:00 +0100
Processing by PasswordsController#edit as HTML
Redirected to http://test.host/login
Completed 404 Not Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find User without an ID):
  
app/controllers/passwords_controller.rb:5:in 'PasswordsController#edit'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:01.051953"], ["updated_at", "2025-12-12 10:13:01.051953"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by PasswordsController#edit as HTML
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 775], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 9.9ms | ActiveRecord: 1.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:01.086031"], ["updated_at", "2025-12-12 10:13:01.086031"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by PasswordsController#edit as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 776], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:01.208905"], ["updated_at", "2025-12-12 10:13:01.208905"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/change_password" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by PasswordsController#update as HTML
  Parameters: {"user" => {"password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 777], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = $1, "force_password_reset" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["updated_at", "2025-12-12 10:13:01.222680"], ["id", 777]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 2.1ms | ActiveRecord: 7.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:01.236835"], ["updated_at", "2025-12-12 10:13:01.236835"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/change_password" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by PasswordsController#update as HTML
  Parameters: {"user" => {"password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 778], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 3.3ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:01.284185"], ["updated_at", "2025-12-12 10:13:01.284185"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by SessionsController#login as HTML
Redirected to http://test.host/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser2"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:13:01.325206"], ["updated_at", "2025-12-12 10:13:01.325206"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by SessionsController#register as HTML
Redirected to http://test.host/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:13:01.352468"], ["updated_at", "2025-12-12 10:13:01.352468"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 4.6ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:13:01.373080"], ["updated_at", "2025-12-12 10:13:01.373080"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 3.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:13:01.406455"], ["updated_at", "2025-12-12 10:13:01.406455"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.1ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:13:01 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:27.853833"], ["updated_at", "2025-12-12 10:14:27.853833"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:27.891845"], ["updated_at", "2025-12-12 10:14:27.891845"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:27.912116"], ["updated_at", "2025-12-12 10:14:27.912116"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:27.934315"], ["updated_at", "2025-12-12 10:14:27.934315"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.6ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", nil], ["created_at", "2025-12-12 10:14:27.954499"], ["updated_at", "2025-12-12 10:14:27.954499"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:14:27 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_07e52212", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_07e52212", "email" => "test_ef314148@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_07e52212"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_07e52212"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:28.085941"], ["updated_at", "2025-12-12 10:14:28.085941"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=785 username=testuser_07e52212
Completed 201 Created in 64ms (Views: 0.3ms | ActiveRecord: 5.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_57aa0405", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_57aa0405"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_57aa0405"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:28.117055"], ["updated_at", "2025-12-12 10:14:28.117055"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 11ms (Views: 0.2ms | ActiveRecord: 6.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_0cbba459", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0cbba459", "email" => "test_3a660813@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0cbba459"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 9ms (Views: 0.1ms | ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_d8bb9e30", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_d8bb9e30", "email" => "test_9a2ff9f9@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_d8bb9e30"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_d8bb9e30"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:28.160249"], ["updated_at", "2025-12-12 10:14:28.160249"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=787 username=testuser_d8bb9e30
Completed 201 Created in 8ms (Views: 0.3ms | ActiveRecord: 5.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_df30771c"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_df30771c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:28.174370"], ["updated_at", "2025-12-12 10:14:28.174370"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_df30771c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_df30771c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_df30771c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_df30771c id=788
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:14:28.188294"], ["id", 788]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 8.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0f30eef1"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_0f30eef1"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:28.204111"], ["updated_at", "2025-12-12 10:14:28.204111"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_0f30eef1", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_0f30eef1", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_0f30eef1"], ["LIMIT", 1]]
Login failed for username=testuser_0f30eef1
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_428ea36c"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_428ea36c"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:28.225362"], ["updated_at", "2025-12-12 10:14:28.225362"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_428ea36c", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_428ea36c", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_428ea36c"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_428ea36c id=790
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9d41cb65"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9d41cb65"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:28.243808"], ["updated_at", "2025-12-12 10:14:28.243808"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_9d41cb65", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_9d41cb65", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9d41cb65"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_9d41cb65 id=791
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:14:28.252056"], ["id", 791]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=791
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 1.8ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 21.7ms | GC: 0.0ms)
Completed 200 OK in 40ms (Views: 30.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:14:28 +0100
Processing by PasswordsController#edit as HTML
Redirected to http://test.host/login
Completed 404 Not Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find User without an ID):
  
app/controllers/passwords_controller.rb:5:in 'PasswordsController#edit'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:29.159252"], ["updated_at", "2025-12-12 10:14:29.159252"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by PasswordsController#edit as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 792], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 8.4ms | ActiveRecord: 1.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:29.188773"], ["updated_at", "2025-12-12 10:14:29.188773"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by PasswordsController#edit as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 793], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:29.207501"], ["updated_at", "2025-12-12 10:14:29.207501"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/change_password" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by PasswordsController#update as HTML
  Parameters: {"user" => {"password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 794], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = $1, "force_password_reset" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["updated_at", "2025-12-12 10:14:29.223946"], ["id", 794]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 2.4ms | ActiveRecord: 8.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:29.240780"], ["updated_at", "2025-12-12 10:14:29.240780"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/change_password" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by PasswordsController#update as HTML
  Parameters: {"user" => {"password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 795], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering passwords/edit.html.erb within layouts/application
  Rendered passwords/edit.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 2.7ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 11.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:29.286158"], ["updated_at", "2025-12-12 10:14:29.286158"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by SessionsController#login as HTML
Redirected to http://test.host/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 2.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser2"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser2"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:14:29.327913"], ["updated_at", "2025-12-12 10:14:29.327913"]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by SessionsController#register as HTML
Redirected to http://test.host/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.5ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:14:29.352479"], ["updated_at", "2025-12-12 10:14:29.352479"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 5.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.8ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:14:29.373875"], ["updated_at", "2025-12-12 10:14:29.373875"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 4.7ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (3.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:14:29.409844"], ["updated_at", "2025-12-12 10:14:29.409844"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 5.5ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:14:29 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[dotenv] Set [36mOPENWEATHER_API_KEY[0m, [36mPOSTGRES_DB[0m, [36mPOSTGRES_HOST[0m, [36mPOSTGRES_PASSWORD[0m, [36mPOSTGRES_PORT[0m, and [36mPOSTGRES_USER[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[dotenv] Saved a snapshot of [32mENV[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.183954"], ["updated_at", "2025-12-12 10:19:56.183954"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.212885"], ["updated_at", "2025-12-12 10:19:56.212885"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.228628"], ["updated_at", "2025-12-12 10:19:56.228628"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.246282"], ["updated_at", "2025-12-12 10:19:56.246282"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.3ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", nil], ["created_at", "2025-12-12 10:19:56.262628"], ["updated_at", "2025-12-12 10:19:56.262628"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_06a38fde", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_06a38fde", "email" => "test_7e03420f@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_06a38fde"], ["LIMIT", 1]]
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_06a38fde"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.384598"], ["updated_at", "2025-12-12 10:19:56.384598"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=802 username=testuser_06a38fde
Completed 201 Created in 35ms (Views: 0.3ms | ActiveRecord: 8.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_9c7a9890", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_9c7a9890"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_9c7a9890"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.432175"], ["updated_at", "2025-12-12 10:19:56.432175"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 8ms (Views: 0.2ms | ActiveRecord: 5.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#register as JSON
  Parameters: {"user" => {"username" => "testuser_40f43c22", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_40f43c22", "email" => "test_45654c6f@example.com", "password" => "password", "password_confirmation" => "mismatch"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_40f43c22"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
User creation failed: Password confirmation doesn't match Password
Completed 422 Unprocessable Content in 8ms (Views: 0.1ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/test/register" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#register as HTML
  Parameters: {"user" => {"username" => "testuser_60a96c51", "email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
TEST REGISTER called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_60a96c51", "email" => "test_d3bf8dd8@example.com", "password" => "password", "password_confirmation" => "password"}, "controller" => "test/users", "action" => "register"} permitted: false>
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_60a96c51"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_60a96c51"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.484885"], ["updated_at", "2025-12-12 10:19:56.484885"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
User created successfully: id=804 username=testuser_60a96c51
Completed 201 Created in 10ms (Views: 0.2ms | ActiveRecord: 6.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f106f8be"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_f106f8be"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.501957"], ["updated_at", "2025-12-12 10:19:56.501957"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_f106f8be", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_f106f8be", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_f106f8be"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_f106f8be id=805
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:19:56.515624"], ["id", 805]]
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 5.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7e9de352"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_7e9de352"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.530101"], ["updated_at", "2025-12-12 10:19:56.530101"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_7e9de352", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_7e9de352", "password" => "wrong"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_7e9de352"], ["LIMIT", 1]]
Login failed for username=testuser_7e9de352
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_79a4f054"], ["LIMIT", 1]]
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_79a4f054"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.555852"], ["updated_at", "2025-12-12 10:19:56.555852"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_79a4f054", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_79a4f054", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_79a4f054"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_79a4f054 id=807
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1c22c125"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "password", "password_digest", "force_password_reset", "last_login", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "testuser_1c22c125"], ["email", "[FILTERED]"], ["password", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["force_password_reset", "[FILTERED]"], ["last_login", nil], ["created_at", "2025-12-12 10:19:56.587936"], ["updated_at", "2025-12-12 10:19:56.587936"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/test/login" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#login as JSON
  Parameters: {"user" => {"username" => "testuser_1c22c125", "password" => "[FILTERED]"}}
TEST LOGIN called with params: #<ActionController::Parameters {"user" => {"username" => "testuser_1c22c125", "password" => "password"}, "controller" => "test/users", "action" => "login"} permitted: false>
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "testuser_1c22c125"], ["LIMIT", 1]]
Login success via Test::UsersController for user=testuser_1c22c125 id=808
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "last_login" = $1 WHERE "users"."id" = $2[0m  [["last_login", "2025-12-12 10:19:56.601608"], ["id", 808]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.1ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/test/logout" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by Test::UsersController#logout as JSON
  Parameters: {"user" => {}}
TEST LOGOUT called for session_user_id=808
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by HomeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 2.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 24.5ms | GC: 0.0ms)
Completed 200 OK in 41ms (Views: 32.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
Started GET "/change_password" for 127.0.0.1 at 2025-12-12 11:19:56 +0100
Processing by PasswordsController#edit as HTML
Redirected to http://test.host/login
Completed 404 Not Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find User without an ID):
  
app/controllers/passwords_controller.rb:5:in 'PasswordsController#edit'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/login" for 127.0.0.1 at 2025-12-12 11:19:57 +0100
Processing by SessionsController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/login.html.erb within layouts/application
  Rendered sessions/login.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 7.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/register" for 127.0.0.1 at 2025-12-12 11:19:57 +0100
Processing by SessionsController#register as HTML
  Rendering layout layouts/application.html.erb
  Rendering sessions/register.html.erb within layouts/application
  Rendered sessions/register.html.erb within layouts/application (Duration: 1.9ms | GC: 0.0ms)
  Rendered layouts/_navigation.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:19:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.2ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:19:57.429485"], ["updated_at", "2025-12-12 10:19:57.429485"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:19:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.0ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:19:57.445362"], ["updated_at", "2025-12-12 10:19:57.445362"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 3.4ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:19:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather" for 127.0.0.1 at 2025-12-12 11:19:57 +0100
Processing by Api::WeatherController#show as HTML
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWeatherSearch Create (2.7ms)[0m  [1m[32mINSERT INTO "weather_searches" ("city", "user_ip", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["city", "Copenhagen"], ["user_ip", "127.0.0.1"], ["created_at", "2025-12-12 10:19:57.472706"], ["updated_at", "2025-12-12 10:19:57.472706"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/weather?city=Copenhagen" for 127.0.0.1 at 2025-12-12 11:19:57 +0100
Processing by Api::WeatherController#show as HTML
  Parameters: {"city" => "Copenhagen"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[dotenv] Restored snapshot of [32mENV[0m
[dotenv] Restored [36mOPENWEATHER_API_KEY[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
